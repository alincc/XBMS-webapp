<div fxFlex fxLayout="row" cdkDropListGroup>


  <div fxFlex="20%" class="tools">
    <div cdkDropList #toolsetList="cdkDropList" [cdkDropListData]="toolset" class="tools-list"
      (cdkDropListDropped)="drop($event)">
      <h2>Tools</h2>
      <div class="tool-box" *ngFor="let item of toolset" cdkDrag>
        <div *ngIf="item.type === 'Image'">
          <mat-icon matSuffix>add_photo_alternate</mat-icon> {{item.type}}
        </div>
        <div *ngIf="item.type === 'Text'">
          <mat-icon matSuffix>text_fields</mat-icon> {{item.type}}
        </div>
        <div *ngIf="item.type === 'Button'">
          <mat-icon matSuffix>add_box</mat-icon> {{item.type}}
        </div>
        <div *ngIf="item.type === 'Divider'">
          <mat-icon matSuffix>line_style</mat-icon> {{item.type}}
        </div>
        <div *ngIf="item.type === 'Accordion'">
          <mat-icon matSuffix>view_day</mat-icon> {{item.type}}
        </div>
        <div *ngIf="item.type === 'Carousel'">
          <mat-icon matSuffix>view_carousel</mat-icon> {{item.type}}
        </div>
      </div>
      <button a mat-raised-button (click)="ConvertToMail()">Convert</button>
    </div>
  </div>

  <div fxFlex="70%" class="template" fxLayout="column">
    <table>
      <tr>
        <td>
          <h2>Template</h2>
        </td>
      </tr>
      <tr>
        <td>
          <mat-form-field style="width: 95%;" appearance="outline">
            <input [(ngModel)]=subject type="text" matInput placeholder="Subject Line">
          </mat-form-field>
        </td>
        <td>
          <!-- <mat-form-field style="width: 95%;" appearance="outline">
            <input [(ngModel)]=preview type="text" matInput placeholder="preview">
          </mat-form-field> -->
        </td>
      </tr>
      <tr>
        <td>
          <mat-icon (click)="onshowemoji()">insert_emoticon</mat-icon>
        </td>
      </tr>
      <tr *ngIf="showemoji">
        <td>
          <emoji-mart (emojiClick)="setemojisubjectline($event)" set="emojione"></emoji-mart>
        </td>
      </tr>
    </table>

    <div class="template-container" *ngFor="let section of mailtemplateArray; let i1 = index" fxLayout="row">
      <!-- cdkDropList #listSection="cdkDropList" (cdkDropListDropped)="drop($event, i1, i2)" [cdkDropListData]="mailtemplateArray" -->
      <label class="sectionlabel">Section <mat-icon (click)="onSelectSectionPart(i1)" class="iconsize-10" matSuffix>
          mode_edit</mat-icon>
        <mat-icon (click)="onDeleteSectionPart(i1)" class="icon-label" class="iconsize-10" matSuffix>delete</mat-icon>
      </label>

      <div [ngStyle]="sectionStyleArray[i1].style" class="section-box" *ngFor="let column of section; let i2 = index"
        fxLayout="column">
        <div class="section-container">
          <div [ngStyle]="columnStyleArray[i1][i2].style" class="column-box" fxLayout="row" cdkDropList
            #mailtemplateList="cdkDropList" [cdkDropListData]="mailtemplateArray[i1][i2]"
            (cdkDropListDropped)="drop($event, i1, i2)">
            <label class="columnlabel">Column <mat-icon class="icon-label" (click)="onSelectColumnPart(i1, i2)"
                class="iconsize-10" matSuffix>mode_edit</mat-icon>
              <mat-icon (click)="onDeleteColumnPart(i1, i2)" class="iconsize-10" matSuffix>delete</mat-icon>
            </label>
            <div class="item-box" *ngFor="let item of column; let i3 = index;" (click)="onSelectTemplatePart(item, i3)"
              cdkDrag>
              <div *ngIf="item.type === 'Text'" (click)="onSelectTemplatePart(item, i3)">
                <div [innerHTML]="item.content"></div>
                <mat-icon class="textbox-edit-button" class="iconsize-10 text-edit-icon" (click)="onSelectTemplatePart(item, i3)"
                  (click)="openDialog()">mode_edit</mat-icon>
              </div>
              <div *ngIf="item.type === 'Image'">
                <app-fileupload *ngIf="item.url.length < 1" [account]="account" [option]="option" (imgurl)="setimgurl($event, i1, i2, i3)">
                </app-fileupload>
                <img *ngIf="item.url.length > 0" src={{item.url}} [ngStyle]="item.style">
              </div>
              <div *ngIf="item.type === 'Divider'" [ngStyle]="item.style">
              </div>
              <div *ngIf="item.type === 'Accordion'" [ngStyle]="item.style">
                <mat-accordion>
                  <div *ngFor="let elementAccordion of item.elements">
                    <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          {{elementAccordion.title.content}}
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                      {{elementAccordion.text.content}}
                    </mat-expansion-panel>
                  </div>
                </mat-accordion>
              </div>
              <div *ngIf="item.type === 'Carousel'" [ngStyle]="item.style">
                <div class="slideshow-container">
                  <div *ngFor="let image of item.images">
                    <img class="mySlides fade" *ngIf="image.style.src" src={{image.style.src}} style="width:100%">
                  </div>
                  <img  (click)="plusSlides(-1)" src={{item.style[right-icon]}}>
                  <img  (click)="plusSlides(1)" src={{item.style[left-icon]}}>
                  <div  *ngFor="let imagethumb of item.images; let i = index" style="display: inline-block;">
                      <img *ngIf="imagethumb.style.src" (click)="currentSlide(i)" src={{imagethumb.style.src}} class="thumbnails">
                    </div>
                </div>
              </div>
              <div *ngIf="item.type === 'Button'">
                <button (click)="onSelectTemplatePart(item, i3)" [ngStyle]="item.style">{{item.buttontext}}</button>
              </div>
              <mat-icon (click)="onDeleteItemPart(i1, i2, i3)" class="iconsize-10 icon-label" matSuffix>delete
              </mat-icon>
            </div>
          </div>
        </div>
      </div>

      <mat-icon (click)="addToSectionArray(i1)">add</mat-icon>
    </div>
    <mat-icon (click)="addToMailTemplateArray()">add</mat-icon>
  </div>

  <mat-card fxFlex="10%" class="edit">
    <div *ngIf="Column">Edit Column
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorColumn.style.width type="text" matInput placeholder="width">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>

        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorColumn.style.height type="text" matInput placeholder="height">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>

        <tr>
          <td>
            <input [style.background]="rgbaText" matInput Placeholder="background color"
              [value]="maileditorColumn.style['background-color']"
              [style.background]="maileditorColumn.style['background-color']" [cpAlphaChannel]="'always'"
              [cpOutputFormat]="'hex'" [cpPosition]="'left'"
              [(colorPicker)]="maileditorColumn.style['background-color']" />
            <mat-hint>Background Color</mat-hint>
          </td>
        </tr>
        <tr>
          <td>
            <app-fileupload [account]="account" [option]="option" (imgurl)="setbackgroundImageColumn($event)">
            </app-fileupload>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorColumn.style['background-image']" type="text" matInput
                placeholder="Image url">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>url</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorColumn.style.margin type="text" matInput placeholder="margin">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorColumn.style.padding type="text" matInput placeholder="padding">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorColumn.style['border-width']" type="text" matInput
                placeholder="border width">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <mat-select [(value)]="maileditorColumn.style['border-style']" placeholder="style">
                <mat-option value="none">None</mat-option>
                <mat-option value="solid">Solid</mat-option>
                <mat-option value="dotted">Dotted</mat-option>
                <mat-option value="dashed">Dashed</mat-option>
                <mat-option value="double">Double</mat-option>
                <mat-option value="groove">Groove</mat-option>
                <mat-option value="ridge">Ridge</mat-option>
                <mat-option value="inset">Inset</mat-option>
                <mat-option value="outset">Outset</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="Section" class="edit_table">Edit Section
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorSection.style.padding type="text" matInput placeholder="padding">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorSection.style.border type="text" matInput placeholder="border">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <input [style.background]="rgbaText" [value]="maileditorSection.style['background-color']"
              [style.background]="maileditorSection.style['background-color']" [cpAlphaChannel]="'always'"
              [cpOutputFormat]="'hex'" [cpPosition]="'left'"
              [(colorPicker)]="maileditorSection.style['background-color']" />
            <mat-hint>Background Color</mat-hint>
          </td>
        </tr>
        <tr>
          <td>
            <app-fileupload [account]="account" [option]="option" (imgurl)="setbackgroundImageSection($event)">
            </app-fileupload>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorSection.style['background-url']" type="text" matInput
                placeholder="Image url">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>

          </td>
        </tr>
      </table>
    </div>


    <div *ngIf="Image" class="edit_table" fxLayout="row wrap">Edit Image
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorImage.style.width" type="text" matInput placeholder="width">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorImage.style.height" type="text" matInput placeholder="height">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="Divider">Edit Divider
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorDivider.style['border-width']" type="text" matInput
                placeholder="Border Width">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>

        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorDivider.style.width" type="text" matInput placeholder="height">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <input [style.background]="rgbaText" matInput Placeholder="background color"
              [value]="maileditorDivider.style['background-color']" [cpAlphaChannel]="'always'" [cpOutputFormat]="'hex'"
              [cpPosition]="'left'" [(colorPicker)]="maileditorDivider.style['container-background-color']" />
            <mat-hint>Background Color</mat-hint>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]=maileditorDivider.style.padding type="text" matInput placeholder="padding">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorDivider.style['border-width']" type="text" matInput
                placeholder="border width">
              <mat-icon matSuffix>mode_edit</mat-icon>
              <mat-hint>%/px</mat-hint>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <mat-select [(value)]="maileditorDivider.style['border-style']" placeholder="style">
                <mat-option value="none">None</mat-option>
                <mat-option value="solid">Solid</mat-option>
                <mat-option value="dotted">Dotted</mat-option>
                <mat-option value="dashed">Dashed</mat-option>
                <mat-option value="double">Double</mat-option>
                <mat-option value="groove">Groove</mat-option>
                <mat-option value="ridge">Ridge</mat-option>
                <mat-option value="inset">Inset</mat-option>
                <mat-option value="outset">Outset</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="Button">Edit Button
      <br>
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorButton.buttontext" type="text" matInput placeholder="Button Text">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorButton.url" type="text" matInput placeholder="Button URL">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <input [style.background]="rgbaText" matInput Placeholder="background color"
              [value]="maileditorButton.style['background-color']" [cpAlphaChannel]="'always'" [cpOutputFormat]="'hex'"
              [cpPosition]="'left'" [(colorPicker)]="maileditorButton.style['background-color']" />
            <mat-hint>Background Color</mat-hint>
          </td>
        </tr>
        <tr>
          <td>
            <input [style.background]="rgbaText" matInput Placeholder="text color"
              [value]="maileditorButton.style.color" [cpAlphaChannel]="'always'" [cpOutputFormat]="'hex'"
              [cpPosition]="'left'" [(colorPicker)]="maileditorButton.style.color" />
            <mat-hint>Text Color</mat-hint>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <mat-select [(value)]="maileditorButton.style['font-family']">
                <mat-option>None</mat-option>
                <mat-option value="Arial, Helvetica, sans-serif">Arial</mat-option>
                <mat-option value="'Arial Black', Gadget, sans-serif">Arial Black</mat-option>
                <mat-option value="Tahoma, Geneva, sans-serif">Tahoma</mat-option>
                <mat-option value="'Times New Roman', Times, serif">Times New Roman</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorButton.style['border-radius']" type="text" matInput
                placeholder="Border Radius">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorButton.style.height" type="text" matInput placeholder="Height">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorButton.style.width" type="text" matInput placeholder="width">
              <mat-icon matSuffix>mode_edit</mat-icon>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="Carousel" class="edit_table" fxLayout="row wrap">Edit Carousel
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorCarousel.style.width" type="text" matInput placeholder="width">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorCarousel.style.height" type="text" matInput placeholder="height">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <div *ngFor="let image of maileditorCarousel.images; let i = index">
              <img *ngIf="image.style.src" src={{image.style.src}} class="carouselimages">
              <app-fileupload *ngIf="!image.style.src" [account]="account" [option]="option"
                (imgurl)="setCarouselImage($event, i)">
              </app-fileupload>
            </div>
          </td>
        </tr>
        <tr>
          <td>
              <mat-icon (click)="addImageToCarouselArray()">add</mat-icon>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="Accordion" class="edit_table" fxLayout="row wrap">Edit Accordion
      <table>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorAccordion.style.width" type="text" matInput placeholder="width">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input [(ngModel)]="maileditorAccordion.style.height" type="text" matInput placeholder="height">
              <label matSuffix>px/%</label>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <div *ngFor="let elementAcc of maileditorAccordion.elements">
              <mat-form-field>
                <input [(ngModel)]="elementAcc.title.content" type="text" matInput placeholder="Title">
              </mat-form-field>
              <mat-form-field>
                <input [(ngModel)]="elementAcc.text.content" type="text" matInput placeholder="Text">
              </mat-form-field>
            </div>
          </td>
        </tr>
        <tr>
          <mat-icon (click)="addElementToAccordionArray()">add</mat-icon>
        </tr>
      </table>
    </div>
  </mat-card>

</div>