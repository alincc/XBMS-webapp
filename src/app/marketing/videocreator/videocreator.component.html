<speed-dial-fab matTooltip="Add new item" class="speed-dial-container" [reverse-column-direction]="true"
    (fabClick)="onSpeedDialFabClicked($event)" [buttons]="speedDialFabButtons">
</speed-dial-fab>
<div class="savetobutton">
    <button mat-fab color="primary" matTooltip="Convert to video" (click)="converttovideo()">
        <mat-icon>video_library</mat-icon>
    </button>
    <button mat-mini-fab color="primary" matTooltip="Save video" (click)="saveVideo()">
        <mat-icon>save</mat-icon>
    </button>
    <button mat-mini-fab color="primary" matTooltip="Convert to GIF" (click)="converttogif()" [disabled]="counter > 61">
        <mat-icon>gif</mat-icon>
    </button>
    <button mat-mini-fab color="primary" matTooltip="Get embedded code" (click)="createVideoCodeSnippet()">
        <mat-icon>code</mat-icon>
    </button>
</div>
<div class="editbutton">
    <button mat-icon-button [matMenuTriggerFor]="menumarketing" class="menu">
        <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menumarketing="matMenu1">
        <button mat-menu-item (click)="resetVideo()">
            <mat-icon>delete</mat-icon>
            <span>Reset</span>
        </button>
        <button mat-menu-item (click)="resetVideo()">
            <mat-icon>note_add</mat-icon>
            <span>New</span>
        </button>
        <mat-form-field>
            <mat-label>Edit existing element</mat-label>
            <mat-select [(value)]="editablevideo">
                <mat-option *ngFor="let editvideo of editablevideos" [value]="editvideo">
                    {{editvideo.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-menu-item (click)="loadEditableVideo()">Start edit</button>
    </mat-menu>
</div>

<div class="videocontrols" fxLayout="column">
    <div fxLayout="row" fxLayoutGap="4px">
        <button mat-mini-fab color="primary" (click)="playFunc()">
            <mat-icon>play_circle_outline</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="stopFunc()">
            <mat-icon>stop</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="pauseFunc()">
            <mat-icon>pause_circle_outline</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="reverseFunc()">
            <mat-icon>fast_rewind</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="fastforwardFunc()">
            <mat-icon>fast_forward</mat-icon>
        </button>
        <mat-icon *ngIf="setreplay === false" color="primary" (click)="setReplay()">replay</mat-icon>
        <mat-icon *ngIf="setreplay === true" color="accent" (click)="setReplay()">replay</mat-icon>

    </div>
    <div fxLayout="row">
        <!-- <label>Timeline lenght &nbsp; </label>  -->
        <mat-slider matTooltip="Timeline length" (input)="onSliderChange($event)" thumbLabel [displayWith]="formatLabel"
            tickInterval="1" min="1" max="600" style="width: 300px;"></mat-slider>
        <label>{{counter}} &nbsp; sec</label>
    </div>
    <div fxLayout="row">
        <label>{{ currenttime | number : '1.2-2'}}</label>
        <div class="timelinesmall-container" [style.width]="'200px'">
            <div class="timelinesmall-active" [style.width]="counter + 'px'" #timelinebound id="timelinebound">
                <div class="timelinesmall-setter" [style.transform]="'translate(' + currenttime + 'px, 0px)'"
                    [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable [scale]="'1'"></div>
            </div>
        </div>
    </div>

</div>

<div style="width: 100%; margin: 10px 0px 10px 0px;" (swipeleft)="swipeleft($event)" (swiperight)="swiperight($event)">

    <mat-accordion style="width: 100%">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <label>{{elementname}}</label>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div fxLayout="row wrap" fxLayoutGap="20px">
                <mat-form-field>
                    <input [(ngModel)]="elementname" type="text" matInput placeholder="Video Name">
                </mat-form-field>

                <mat-form-field fxFlex>
                    <input (change)="onchangecanvas()" [(ngModel)]="canvas.width" type="text" matInput
                        placeholder="width">
                    <label matSuffix>px</label>
                </mat-form-field>


                <mat-form-field fxFlex>
                    <input (change)="onchangecanvas()" [(ngModel)]="canvas.height" type="text" matInput
                        placeholder="height">
                    <label matSuffix>px</label>
                </mat-form-field>

                <div>
                    <app-videoupload *ngIf="!canvas.videourl" [account]="Account" [option]="option"
                        (imgurl)="setVideo($event)">
                    </app-videoupload>
                    <mat-icon *ngIf="canvas.videourl" matTooltip="delete video" (click)="canvas.videourl = ''"
                        class="iconsize-10">delete
                    </mat-icon>
                    <label *ngIf="canvas.videourl">{{ canvas.videourl | fileName }}</label>
                </div>

                <div>
                    <app-audioupload *ngIf="!canvas.audio" [account]="Account" [option]="option"
                        (imgurl)="setAudioCanvas($event)">
                    </app-audioupload>
                    <mat-icon *ngIf="canvas.audio" matTooltip="delete audio" (click)="canvas.audio = ''"
                        class="iconsize-10">delete
                    </mat-icon>
                    <label *ngIf="canvas.audio">{{ canvas.audio | fileName }}</label>
                </div>

                <div>
                    <app-background *ngIf="!canvas.videourl || !canvas['background-image']" [account]="Account"
                        [option]="option" (imgurl)="setBackground($event)">
                    </app-background>
                    <mat-icon *ngIf="canvas['background-image']" (click)="canvas['background-image'] = ''"
                        class="iconsize-10">delete
                    </mat-icon>
                    <label *ngIf="canvas['background-image']">{{ canvas['background-image'] | fileName }}</label>
                </div>
                
                    <input placeholder="Background color" [(ngModel)]="canvas['background-color']"
                        style="width: 60px; height: 30px; z-index: 10" [style.background]="canvas['background-color']"
                        [cpToggle]="false" [(colorPicker)]="canvas['background-color']" [cpPosition]="'auto'"
                        (colorPickerChange)="onchangecanvas()" [cpCancelButton]="true"
                        [cpPresetLabel]="'Company colors'"
                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
               
                <mat-slide-toggle fxFlex *ngIf="canvas.videourl" [(ngModel)]="canvas.loop">Loop</mat-slide-toggle>

                <mat-form-field>
                    <mat-select [(value)]="canvas.weather" (selectionChange)="detectchange()"
                        placeholder="Select weather">
                        <mat-option value="">None</mat-option>
                        <mat-option value="rain">Rain</mat-option>
                        <mat-option value="snow">Snow</mat-option>
                        <mat-option value="leaves">Leaves</mat-option>
                        <mat-option value="sun">Sun</mat-option>
                        <mat-option value="clouds">Clouds</mat-option>
                    </mat-select>
                </mat-form-field>

            </div>

        </mat-expansion-panel>
    </mat-accordion>

    <!-- <button mat-button (click)="getEditFile()">get elements</button> -->



    <div *ngIf="selectedelement" fxLayout="column">
        <div *ngFor="let animation of selectedelement.animation; let i = index;">
            <mat-accordion style="width: 100%">
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <label style="width: 300px;">{{animation.anim_type}}</label>
                            <mat-icon (click)="deleteEffect(i)" matTooltip="Delete effect" class="iconsize-10">delete
                            </mat-icon>
                            <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                filter_none</mat-icon>

                            <div class="timeline-container" [style.width]="'6000px'">
                                <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                    id="timelinebound">
                                    <div class="timeline-setter"
                                        [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                        [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                        (movingOffset)="onMovingTimeline($event, i, animation)" [scale]="'1'"></div>

                                    <div class="timeline-currentelement" ngDraggable [scale]="'1'"
                                        (movingOffset)="onMovingAnimationEl($event, i, animation)" [lockAxis]="'y'"
                                        [preventDefaultEvent]="true" [ngResizable]="element === selectedelement"
                                        [rzHandles]="'e, w'" (rzResizing)="onResizeAnimationEl($event, i, animation)"
                                        [style.width]="animation.duration * 10 + 'px'">
                                    </div>
                                </div>
                            </div>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div fxLayout="row wrap" fxLayoutGap="20px">
                        <!-- <label>Effects &nbsp;</label> -->
                        <mat-form-field>
                            <mat-select [(value)]="animation.anim_type" (selectionChange)="detectchange()">
                                <mat-option value="rotation">Rotate</mat-option>
                                <!-- <mat-option value="translate">Translate</mat-option> -->
                                <mat-option value="scale">Scale</mat-option>
                                <mat-option value="skew">Skew</mat-option>
                                <mat-option value="appear">Appear</mat-option>
                                <!-- <mat-option value="disappear">Disappear</mat-option> -->
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="move">Move</mat-option>
                                <mat-option value="fountain">Fountain</mat-option>
                                <mat-option value="followminions">Minions</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="animation.easetype" (selectionChange)="detectchange()">
                                <mat-option value="">None</mat-option>
                                <mat-option value="power1">Force 1</mat-option>
                                <mat-option value="power2">Force 2</mat-option>
                                <mat-option value="power3">Force 3</mat-option>
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="elastic">Elastic</mat-option>
                                <mat-option value="circle">Circle</mat-option>
                                <mat-option value="sine">Sine</mat-option>
                                <mat-option value="over">Over</mat-option>
                                <mat-option value="easy">Easy</mat-option>
                                <mat-option value="slowmotion">Slowmotion</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="animation.fromto" (selectionChange)="detectchange()">
                                <mat-option value="from">From</mat-option>
                                <mat-option value="to">To</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.duration" type="number" step="0.1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.start_time" type="number" step="0.1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.repeat" type="number" step="1" min="-1" matInput
                                (change)="detectchange()">
                            <mat-hint>repeat</mat-hint>
                        </mat-form-field>
                        <mat-checkbox [(ngModel)]="animation.yoyo" (change)="detectchange()"
                            matTooltip="Reset when repeated">Fluent</mat-checkbox>
                        <div *ngIf="animation.anim_type === 'rotation'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.rotationcycle" type="number" step="0.1" min="0" matInput
                                    (change)="detectchange()">
                                <mat-hint>Rotation</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginX" matInput (change)="detectchange()">
                                <mat-hint>%/px right</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginY" matInput (change)="detectchange()">
                                <mat-hint>%/px bottom</mat-hint>
                            </mat-form-field>
                        </div>
                        <div *ngIf="animation.anim_type === 'scale'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.scalesize" type="number" step="0.1" min="0" matInput>
                                <mat-hint>Scale</mat-hint>
                            </mat-form-field>
                        </div>

                        <div *ngIf="animation.anim_type === 'bounce'">
                            <!-- <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                                 -->

                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.rotationcycle" matInput
                                    [disabled]="animation.rotationkeeppos">
                                <mat-hint>Motion direction</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginX" matInput (change)="detectchange()">
                                <mat-hint>%/px right</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginY" matInput (change)="detectchange()">
                                <mat-hint>%/px bottom</mat-hint>
                            </mat-form-field>
                            <mat-checkbox [(ngModel)]="animation.rotationkeeppos" matTooltip="Keep position">Don't
                                rotate</mat-checkbox>

                            <button mat-button (click)="resetPath()">Set path</button>
                            <button mat-button (click)="editMotionPath(animation)">Edit path</button>
                            <button mat-button (click)="saveNewMotionPath(animation)">Save path</button>
                        </div>

                        <div *ngIf="animation.anim_type === 'skew'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.skewY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.skewX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                        </div>

                        <div *ngIf="animation.anim_type === 'move'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-offset</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-offset</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.rotationcycle" matInput
                                    [disabled]="animation.rotationkeeppos">
                                <mat-hint>Motion direction</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginX" matInput (change)="detectchange()">
                                <mat-hint>%/px right</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginY" matInput (change)="detectchange()">
                                <mat-hint>%/px bottom</mat-hint>
                            </mat-form-field>
                            <mat-checkbox [(ngModel)]="animation.rotationkeeppos" matTooltip="Keep position">Don't
                                rotate</mat-checkbox>
                            <!-- <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button> -->


                            <mat-form-field>
                                <mat-select [(value)]="standardpath" (selectionChange)="detectchange()"
                                    placeholder="Animation">
                                    <mat-option value="linear">Linear</mat-option>
                                    <mat-option value="circle">Circle</mat-option>
                                    <mat-option value="square">Square</mat-option>
                                </mat-select>
                            </mat-form-field>

                            <button mat-button (click)="resetPath()">Set path</button>
                            <button mat-button (click)="editMotionPath(animation)">Edit path</button>
                            <button mat-button (click)="saveNewMotionPath(animation)">Save path</button>
                        </div>

                        <div *ngIf="animation.anim_type === 'followminions'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginX" matInput (change)="detectchange()">
                                <mat-hint>%/px right</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginY" matInput (change)="detectchange()">
                                <mat-hint>%/px bottom</mat-hint>
                            </mat-form-field>
                            <button mat-button (click)="editMotionPath(animation)">Edit path</button>
                        </div>

                        <div>
                            <app-audioupload *ngIf="!animation.audioeffectsrc" [account]="Account" [option]="option"
                                (imgurl)="setAudio($event, animation)">
                            </app-audioupload>
                            <label *ngIf="animation.audioeffectsrc">{{ animation.audioeffectsrc | fileName }}</label>
                            <mat-icon *ngIf="animation.audioeffectsrc" (click)="animation.audioeffectsrc = ''"
                                class="iconsize-10">delete
                            </mat-icon>
                        </div>
                        <!-- <button mat-button
                            (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button> -->
                        <!-- <button mat-button (click)="editMotionPath()">Edit path</button>
                        <button mat-button (click)="saveNewMotionPath()">Save path</button> -->
                    </div>
                </mat-expansion-panel>
            </mat-accordion>

        </div>
        <button mat-button (click)="addNewEffect(animation)">Add new effect</button>

        <div *ngIf="selectedelement.type === 'vector'" fxLayout="column">
            <div *ngFor="let vectoranimation of selectedelement.vectoranimation; let iv = index">
                <mat-accordion>
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <label style="width: 300px;">{{vectoranimation.svganimationtype}}</label>
                                <mat-icon (click)="deleteVectorAnimation(iv)" class="iconsize-10">delete</mat-icon>
                                <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                    filter_none</mat-icon>
                                <div class="timeline-container" [style.width]="'6000px'">
                                    <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                        id="timelinebound">
                                        <div class="timeline-setter"
                                            [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                            [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                            (movingOffset)="onMovingTimeline($event, i, animation)">
                                        </div>
                                        <!-- <div class="timeline-currentelement" ngDraggable
                                            (movingOffset)="onMovingAnimationEl($event, i, vectoranimation)"
                                            [bounds]="timelinebound" [inBounds]="true" [lockAxis]="'y'" ngResizable
                                            rzContainment="#timelinebound" [rzHandles]="'e, w'"
                                            (rzResizing)="onResizeAnimationEl($event, iv, vectoranimation)"
                                            [style.width]="vectoranimation.duration * 10 + 'px'">
                                        </div> -->

                                        <div class="timeline-currentelement" ngDraggable [scale]="'1'"
                                            (movingOffset)="onMovingAnimationEl($event, i, vectoranimation)"
                                            [lockAxis]="'y'" [preventDefaultEvent]="true" ngResizable
                                            [rzHandles]="'e, w'"
                                            (rzResizing)="onResizeAnimationEl($event, iv, vectoranimation)"
                                            [style.width]="vectoranimation.duration * 10 + 'px'">
                                        </div>

                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="vectoranimation.duration" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="vectoranimation.start_time" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="vectoranimation.svganimationtype" (selectionChange)="detectchange()"
                                (selectionChange)="detectMorph(vectoranimation.svganimationtype)"
                                placeholder="Animation">
                                <mat-option value="">None</mat-option>
                                <mat-option value="draw">Draw</mat-option>
                                <mat-option value="morph">Morph</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="vectoranimation.repeat" type="number" step="1" min="-1" matInput
                                (change)="detectchange()">
                            <mat-hint>repeat</mat-hint>
                        </mat-form-field>
                        <mat-checkbox [(ngModel)]="vectoranimation.yoyo" (change)="detectchange()"
                            matTooltip="Reset when repeated">Fluent</mat-checkbox>
                        <!-- [disabled]="vectoranimation.repeat !== -1 -->
                        <mat-form-field>
                            <mat-select [(value)]="vectoranimation.easetype" (selectionChange)="detectchange()"
                                placeholder="Animation">
                                <mat-option value="">None</mat-option>
                                <mat-option value="power1">Force 1</mat-option>
                                <mat-option value="power2">Force 2</mat-option>
                                <mat-option value="power3">Force 3</mat-option>
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="elastic">Elastic</mat-option>
                                <mat-option value="circle">Circle</mat-option>
                                <mat-option value="sine">Sine</mat-option>
                                <mat-option value="over">Over</mat-option>
                                <mat-option value="easy">Easy</mat-option>
                                <mat-option value="slowmotion">Slowmotion</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field>
                            <mat-select [(value)]="vectoranimation.fromto" (selectionChange)="detectchange()">
                                <mat-option value="from">From</mat-option>
                                <mat-option value="to">To</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-checkbox [(ngModel)]=vectoranimation.hideimage>Hide Image</mat-checkbox>
                        <!-- (click)="setSvgOpacity(selectedelement, idx)" -->
                        <div *ngIf="vectoranimation.svganimationtype">

                            <div *ngIf="vectoranimation.svganimationtype === 'draw'" fxLayout="row">

                                <!-- <mat-slide-toggle [(ngModel)]=vectoranimation.yoyo fxFlex (change)="detectchange()">Yoyo
                                    effect</mat-slide-toggle> -->

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.repeat" type="number" matInput
                                        (change)="detectchange()">
                                    <mat-hint>Repeat</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.linethickness" matInput
                                        (change)="detectchange()">
                                    <mat-hint>Thickness</mat-hint>
                                </mat-form-field>

                                <div style="max-width: 150px; height: 30px;" fxFlex>
                                    <input style="width: 60px; height: 30px;" (change)="detectchange()"
                                        [style.background]="vectoranimation.drawcolor" [cpToggle]="false"
                                        [(colorPicker)]="vectoranimation.drawcolor" [cpCancelButton]="true"
                                        [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.fillleft" matInput (change)="detectchange()">
                                    <mat-hint>Start fill left</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.fillright" matInput (change)="detectchange()">
                                    <mat-hint>Start fill right</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.drawleft" matInput (change)="detectchange()">
                                    <mat-hint>Draw left</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.drawright" matInput (change)="detectchange()">
                                    <mat-hint>Draw right</mat-hint>
                                </mat-form-field>

                                <!-- deduct percentage from draw  percentage  {drawSVG:"100%"}, {drawSVG:"50% 50%"}, 0.1) -->

                            </div>

                            <div *ngIf="vectoranimation.svganimationtype === 'morph'" fxLayout="row">

                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <button mat-button (click)="addVectorAnimation(selectedelement)">Add new Vector effect</button>
        </div>

        <div *ngIf="selectedelement.type === 'text'" fxLayout="column">
            <div *ngFor="let textanimation of selectedelement.splittextanimation; let iv = index">
                <mat-accordion>
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <label style="width: 300px;">{{textanimation.textanimationtype}}</label>
                                <mat-icon (click)="deleteTextAnimation(i)" class="iconsize-10">delete</mat-icon>
                                <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                    filter_none</mat-icon>
                                <div class="timeline-container" [style.width]="'6000px'">
                                    <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                        id="timelinebound">
                                        <div class="timeline-setter"
                                            [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                            [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                            (movingOffset)="onMovingTimeline($event, i, animation)">
                                        </div>
                                        <div class="timeline-currentelement" ngDraggable
                                            (movingOffset)="onMovingAnimationEl($event, i, textanimation)"
                                            [bounds]="timelinebound" [inBounds]="true" [lockAxis]="'y'" ngResizable
                                            rzContainment="#timelinebound" [rzHandles]="'e, w'"
                                            (rzResizing)="onResizeAnimationEl($event, iv, textanimation)"
                                            [style.width]="textanimation.duration * 10 + 'px'">
                                        </div>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.duration" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.start_time" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.textanimationtype" (selectionChange)="detectchange()"
                                placeholder="Animation">
                                <mat-option value="chars">By character</mat-option>
                                <mat-option value="chars">By character</mat-option>
                                <mat-option value="words">By word</mat-option>
                                <mat-option value="lines">By line</mat-option>
                                <!-- <mat-option value="all">All</mat-option> -->
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.easetype" (selectionChange)="detectchange()"
                                placeholder="Animation">
                                <mat-option value="">None</mat-option>
                                <mat-option value="power1">Force 1</mat-option>
                                <mat-option value="power2">Force 2</mat-option>
                                <mat-option value="power3">Force 3</mat-option>
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="elastic">Elastic</mat-option>
                                <mat-option value="circle">Circle</mat-option>
                                <mat-option value="sine">Sine</mat-option>
                                <mat-option value="over">Over</mat-option>
                                <mat-option value="easy">Easy</mat-option>
                                <mat-option value="slowmotion">Slowmotion</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.fromto" (selectionChange)="detectchange()">
                                <mat-option value="from">From</mat-option>
                                <mat-option value="to">To</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.repeat" type="number" matInput (change)="detectchange()">
                            <mat-hint>Repeat</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.x" type="number" step="1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>X</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.y" type="number" step="1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Y</mat-hint>
                        </mat-form-field>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>

        <div *ngIf="selectedelement.type === 'chart'" fxLayout="column">

            <mat-accordion>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Charts
                            <div class="timeline-container" [style.width]="'6000px'">
                                <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                    id="timelinebound">
                                    <div class="timeline-setter"
                                        [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                        [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                        (movingOffset)="onMovingTimeline($event, i, animation)">
                                    </div>
                                    <div class="timeline-currentelement" ngDraggable
                                        (movingOffset)="onMovingAnimationChart($event, i, selectedelement)"
                                        [bounds]="timelinebound" [inBounds]="true" [lockAxis]="'y'" ngResizable
                                        rzContainment="#timelinebound" [rzHandles]="'e, w'"
                                        (rzResizing)="onResizeAnimationChart($event, iv, selectedelement)"
                                        [style.width]="selectedelement.lineChartOptions.animation.duration / 100 + 'px'">
                                    </div>
                                </div>
                            </div>

                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <mat-form-field style="max-width: 100px;" *ngIf="selectedelement.lineChartOptions.animation">
                        <input [(ngModel)]="selectedelement.lineChartOptions.animation.duration" type="number" step="1"
                            min="0" matInput>
                        <mat-hint>Duration</mat-hint>
                    </mat-form-field>
                    <mat-form-field style="max-width: 46px;">
                        <input [(ngModel)]="selectedelement.start_time" type="number" step="0.1" min="0" matInput>
                        <mat-hint>Start</mat-hint>
                    </mat-form-field>
                    <mat-form-field *ngIf="selectedelement.lineChartOptions.animation">
                        <mat-select [(value)]="selectedelement.lineChartOptions.animation.easing"
                            (selectionChange)="detectchange()" placeholder="Animation">
                            <mat-option value="linear">Linear</mat-option>
                            <mat-option value="easeInCubic">easeInCubic</mat-option>
                            <mat-option value="easeInQuart">easeInQuart</mat-option>
                            <mat-option value="easeInExpo">easeInExpo</mat-option>
                            <mat-option value="easeInElastic">easeInElastic</mat-option>
                            <mat-option value="easeInBounce">easeInBounce</mat-option>
                            <mat-option value="easeOutSine">easeOutSine</mat-option>
                            <mat-option value="easeInOutCirc">easeInOutCirc</mat-option>
                        </mat-select>
                    </mat-form-field>

                </mat-expansion-panel>
            </mat-accordion>
        </div>

    </div>
    <!-- <mat-card fxLayout="column">


    </mat-card> -->
</div>

<!-- class="generalprogressbar" -->
<div *ngIf="systembusy">
    <label>lOADING...</label>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>

<div class="tabcontainer" fxLayout="row" cdkDropListGroup (swipeleft)="swipeleft($event)"
    (swiperight)="swiperight($event)">
    <!-- to do: add magic wand toosl -->

    <div class="card-left-menu" ngClass.gt-xs="listview-normal" ngClass.lt-sm="listview-noshow"
        [class.listview-xs-show]="listviewxsshow" fxLayout="column">
        <!-- <label>Edit</label> -->
        <div fxLayout="column">
            <div fxLayout="column" fxLayout.xs="column">
                <mat-accordion cdkDropList (cdkDropListDropped)="drop($event)">
                    <mat-expansion-panel *ngFor="let element of animationarray; let i = index" cdkDrag
                        (click)="onSelectElement($event, element)" [expanded]="element === selectedelement">
                        <mat-expansion-panel-header *ngIf="element.type === 'image' && !element.groupmember"
                            cdkDragHandle [class.selected]="element === selectedelement">
                            <mat-panel-title>
                                <img *ngIf="element.src" src={{element.src}} class="elementsedit"
                                    style="height: 30px; width: auto;">
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>

                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'image' && !element.groupmember" fxLayout="column">
                            <!-- <mat-checkbox [(ngModel)]="cropimages"
                            (change)="element.style['clip-path'] = ''"
                                matTooltip="Crop image to size">Crop</mat-checkbox> -->
                            <app-fileupload *ngIf="!element.src" [account]="Account" [option]="option"
                                (imgurl)="setImage($event, i)">
                            </app-fileupload>
                            <div fxLayout="row wrap" fxLayoutGap="20px">
                                <button mat-button (click)="imageCropPath()">edit crop</button>
                                <button mat-button (click)="imageSaveCropPath()">
                                    <mat-icon>save</mat-icon>
                                </button>
                                <button mat-button (click)="imageRemoveCrop()">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>
                            <mat-form-field>
                                <mat-select [(value)]="standardpath" (selectionChange)="resetImageCropPath()"
                                    placeholder="Animation">
                                    <mat-option value="linear">Linear</mat-option>
                                    <mat-option value="circle">Circle</mat-option>
                                    <mat-option value="square">Square</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <div>
                                <mat-slide-toggle (change)="detectchange()" [(ngModel)]="element.grey">Greyscale
                                </mat-slide-toggle>
                                <mat-slide-toggle (change)="detectchange()" [(ngModel)]="element.blur">Blur
                                </mat-slide-toggle>
                            </div>
                            <div>
                                <mat-form-field style="max-width: 46px;">
                                    <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                    <mat-hint>Y |</mat-hint>
                                </mat-form-field>
                                <mat-form-field style="max-width: 46px;">
                                    <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                    <mat-hint>X -</mat-hint>
                                </mat-form-field>
                            </div>
                            <div>
                                <mat-form-field style="max-width: 46px;">
                                    <input (change)="detectchange()" [(ngModel)]="element.style.height" matInput>
                                    <mat-hint>Height</mat-hint>
                                </mat-form-field>
                                <mat-form-field style="max-width: 46px;">
                                    <input (change)="detectchange()" [(ngModel)]="element.style.width" matInput>
                                    <mat-hint>Width</mat-hint>
                                </mat-form-field>
                            </div>
                            <div *ngIf="element.src">
                                <img style="max-width: 100%;" src={{element.src}} class="elementsedit">
                                <mat-icon (click)="element.src = ''" class="icon-label" class="iconsize-12">
                                    delete
                                </mat-icon>
                            </div>

                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'text' && !element.groupmember"
                            cdkDragHandle [class.selected]="element === selectedelement">
                            <mat-panel-title>
                                <label>{{element.content}}</label>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'text' && !element.groupmember">

                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.style.height" matInput>
                                <mat-hint>Height</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.style.width" matInput>
                                <mat-hint>Width</mat-hint>
                            </mat-form-field>
                            <div fxLayout="column">
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field style="width: 95%;" appearance="outline">
                                        <input matTooltip="insert text" #inputpreview [(ngModel)]="element.content"
                                            type="text" matInput placeholder="element text">
                                        <mat-icon matTooltip="select Emoji" (click)="onshowemoji(i)" matSuffix>
                                            insert_emoticon</mat-icon>
                                        <mat-hint align="end">{{inputpreview.value?.length || 0}}/90</mat-hint>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column" *ngIf="showemoji">
                                    <div fxFlex>
                                        <div style="width: 100%;
                                          height: 100%;
                                          position: absolute;
                                          top: 8;
                                          left: 20;
                                          z-index: 20;">
                                            <emoji-mart (emojiClick)="setemoji($event, i, element)" set="emojione">
                                            </emoji-mart>
                                        </div>
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field>
                                        <input [(ngModel)]="element.style['font-size']" type="text" matInput
                                            placeholder="font size" (change)="detectchange()">
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <input style="width: 60px;" [style.background]="element.style['color']"
                                        [cpOutputFormat]="'hex'" [(colorPicker)]="element.style['color']"
                                        (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div>
                                <br>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field>
                                        <mat-label>Select font</mat-label>
                                        <mat-select [(value)]="element.style['font-family']"
                                            (selectionChange)="detectchange()">
                                            <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                <label [style.font-family]="font.value">{{font.name}}</label>
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row">
                                    <mat-button-toggle fxFlex (click)="setbold(element)" value="bold">Bold
                                    </mat-button-toggle>
                                    <mat-button-toggle fxFlex (click)="setitalic(element)" value="italic">Italic
                                    </mat-button-toggle>
                                </div>
                            </div>
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'shape' && !element.groupmember"
                            cdkDragHandle [class.selected]="element === selectedelement">
                            <mat-panel-title>
                                <div [style.width]="'50px'" [style.height]="'50px'" [ngStyle]="element.style"
                                    [className]="element.style.class">
                                </div>
                                <div style="height: 30px; width: 30px"
                                    [style.background-color]="element.style['background-color']"></div>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'shape' && !element.groupmember">
                            <mat-form-field>
                                <mat-select [(value)]="element.shape" (selectionChange)="onChangeShape(element)">
                                    <mat-option value="square">Square</mat-option>
                                    <mat-option value="round">Round</mat-option>
                                    <mat-option value="heart">Heart</mat-option>
                                    <!-- <mat-option value="star">Star</mat-option> -->
                                    <!-- <mat-option value="triangle">Triangle</mat-option> -->
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.style.height" matInput>
                                <mat-hint>Height</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.style.width" matInput>
                                <mat-hint>Width</mat-hint>
                            </mat-form-field>
                            <div fxLayout="column" *ngIf="element.shape !== 'heart'">
                                <input style="width: 60px;" [style.background]="element.style['background-color']"
                                    [(colorPicker)]="element.style['background-color']"
                                    (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                            </div>
                            <!-- <div fxLayout="column" *ngIf="element.shape === 'heart'">
                                    <input style="width: 230px;" [style.background]="element.style['background-color']"
                                        [(colorPicker)]="element.style['background-color']"
                                        (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div> -->
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'vector' && !element.groupmember"
                            cdkDragHandle [class.selected]="element === selectedelement">
                            <mat-panel-title>
                                <!-- <mat-checkbox color="primary" [(ngModel)]="element.selected"></mat-checkbox> -->
                                <div *ngIf="element.vectors[0].src" [inlineSVG]="element.vectors[0].src"
                                    [onSVGLoaded]="previewSVG" [attr.id]="'previewboxtitle' + i" class="elementsedit"
                                    style="height: 30px; width: auto;">
                                </div>
                                <!-- <div *ngIf="!element.vectors[0].src" [innerHTML]="element.svgcombi  | safeHtml"
                                    [attr.id]="'previewboxtitle'" style="height: 30px; width: 30px;">
                                </div> -->
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate element"
                                    class="iconsize-10">filter_none
                                </mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'vector' && !element.groupmember">

                            <div *ngFor="let vector of element.vectors; let idx = index;">
                                <mat-expansion-panel *ngIf="element.morph">

                                    <mat-expansion-panel-header>
                                        <div *ngIf="vector.src || vector.svgcombi !== 'undefined'"
                                            [attr.id]="vector.idx" [inlineSVG]="vector.src" [onSVGLoaded]="previewSVG"
                                            class="elementsedit" style="height: 30px; width: auto;">
                                        </div>
                                    </mat-expansion-panel-header>

                                    <div *ngIf="vector.src" [inlineSVG]="vector.src"
                                        style="width: 100px; height: 200px;" id="{{vector.idx}}"
                                        (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                    </div>
                                    <app-vectorupload *ngIf="!vector.src" [account]="Account" [option]="option"
                                        (imgurl)="setVector($event, i, idx)">
                                    </app-vectorupload>
                                    <mat-icon (click)="deleteVectorSrc(i, idx, element)" class="icon-label"
                                        class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                        (click)="removeVectorPathSelection()">
                                        delete
                                    </mat-icon>
                                    <mat-icon (click)="seperatePaths(idx, vector, element)" class="icon-label"
                                        class="iconsize-14" matTooltip="Seperate images parts">
                                        tab_unselected
                                    </mat-icon>
                                </mat-expansion-panel>
                                <div *ngIf="!element.morph">
                                    <div *ngIf="vector.src" [inlineSVG]="vector.src" [onSVGLoaded]="previewSVGBig"
                                        (onSVGInserted)="initVectors($event, i, idx, vector.idx)" [attr.id]="vector.idx"
                                        style="height: 100px; width: 100px;">
                                    </div>
                                    <!-- <div *ngIf="vector.svgcombi" [inlineSVG]="vector.svgcombi" [attr.id]="vector.idx"
                                         [onSVGLoaded]="previewSVGBig"
                                            (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                            </div> -->
                                    <div *ngIf="!vector.src && element.svgcombi" style="height: 100px; width: 100px;"
                                        [attr.id]="vector.idx" [innerHTML]="element.svgcombi | safeHtml"
                                        (click)="clickVectorPaths($event)"
                                        (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                    </div>
                                    <app-vectorupload *ngIf="!vector.src && !element.svgcombi" [account]="Account"
                                        [option]="option" (imgurl)="setVector($event, i, idx)">
                                    </app-vectorupload>
                                    <!-- <mat-icon (click)="deleteVectorSrc(idx, element)" class="icon-label"
                                        class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                        (click)="removeVectorPathSelection()">
                                        delete
                                    </mat-icon>
                                    <mat-icon (click)="seperatePaths(idx, vector, element)" class="icon-label"
                                        class="iconsize-14" matTooltip="Seperate images parts">
                                        tab_unselected
                                    </mat-icon> -->
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.posy" type="number"
                                            matInput>
                                        <mat-hint>Y |</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.posx" type="number"
                                            matInput>
                                        <mat-hint>X -</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.style.height" matInput>
                                        <mat-hint>Height</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.style.width" matInput>
                                        <mat-hint>Width</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <button mat-mini-fab *ngIf="element.morph" class="addbutton" matTooltip="Add vector"
                                (click)="addNewVectorSrc(i, element)" color="primary">
                                <mat-icon>add</mat-icon>
                            </button>
                            <!-- <button mat-mini-fab class="addbutton" matTooltip="Add to Animation Group"
                                (click)="addTooVectorCombi(element)" color="primary">
                                <mat-icon>collections</mat-icon>
                            </button> -->
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'chart' && !element.groupmember"
                            cdkDragHandle>
                            <mat-panel-title>
                                <mat-icon>show_chart</mat-icon>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate element"
                                    class="iconsize-10">filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'chart' && !element.groupmember">
                            <mat-accordion>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Data
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngFor="let label of element.label; let i1 = index;">
                                        <mat-form-field fxflex>
                                            <input (change)="detectchangeLabel(i, i1, label)" [(ngModel)]="label"
                                                type="text" matInput placeholder="label">
                                        </mat-form-field>
                                    </div>
                                    <mat-icon (click)="deletelabel(i, i1)" class="iconsize-12">delete</mat-icon>
                                    <mat-icon (click)="addLabel(i, i1)">add</mat-icon>
                                    <div *ngFor="let row of element.data; let i1 = index;" fxLayout="column">

                                        <mat-form-field fxflex>
                                            <input (change)="detectchangerowlabel(i, i1, row.label)"
                                                [(ngModel)]="row.label" type="text" matInput>
                                        </mat-form-field>
                                        <div fxFlex fxLayout="row wrap">
                                            <div *ngFor="let cell of row.data; let i2 = index;">
                                                <mat-form-field fxflex style="width: 20px;">
                                                    <input (change)="detectchangerowcell(i, i1, i2, cell)"
                                                        [(ngModel)]="cell" type="text" matInput>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <mat-icon (click)="deletecell(i, i1)" class="iconsize-12">delete
                                        </mat-icon>
                                        <mat-icon (click)="addcell(i, i1, i2)">add</mat-icon>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>

                            <mat-accordion>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Colors
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngFor="let colors of element.colors" fxLayout="column">
                                        Color Specification
                                        <input style="width: 60px;" [style.background]="colors.backgroundColor"
                                            [(colorPicker)]="colors.backgroundColor"
                                            (colorPickerChange)="detectchange()" [cpCancelButton]="true"
                                            [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                        <mat-icon class="iconsize-12" (click)="colors.backgroundColor = ''">
                                            delete
                                        </mat-icon>
                                        <input style="width: 60px;" [style.background]="colors.borderColor"
                                            [(colorPicker)]="colors.borderColor" (colorPickerChange)="detectchange()"
                                            [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.companysecondarycolor]">
                                        <mat-icon class="iconsize-12" (click)="colors.borderColor = ''">delete
                                        </mat-icon>
                                        <input style="width: 60px;" [style.background]="colors.pointBackgroundColor"
                                            [(colorPicker)]="colors.pointBackgroundColor"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12" (click)="colors.pointBackgroundColor = ''">
                                            delete
                                        </mat-icon>
                                        <input style="width: 60px;" [style.background]="colors.pointBorderColor"
                                            [(colorPicker)]="colors.pointBorderColor"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12" (click)="colors.pointBorderColor = ''">
                                            delete
                                        </mat-icon>
                                    </div>

                                </mat-expansion-panel>
                            </mat-accordion>

                            <mat-accordion>
                                <mat-expansion-panel>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            Chart type
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <mat-form-field>
                                        <mat-select [(value)]="element.charttype"
                                            (selectionChange)="detectchangetype(i, element.charttype)">
                                            <mat-option value="line">line</mat-option>
                                            <mat-option value="bar">bar</mat-option>
                                            <mat-option value="radar">radar</mat-option>
                                            <mat-option value="pie">pie</mat-option>
                                            <mat-option value="polarArea">Polararea</mat-option>
                                            <mat-option value="doughnut">Doughnut</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <div fxLayout="column">
                                        X-Axe
                                        Gridline color
                                        <input style="width: 60px"
                                            [style.background]="element.lineChartOptions.scales.xAxes[0].gridLines.color"
                                            [(colorPicker)]="element.lineChartOptions.scales.xAxes[0].gridLines.color"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12"
                                            (click)="element.lineChartOptions.scales.xAxes[0].gridLines.color = ''">
                                            delete
                                        </mat-icon>
                                        X-Axe
                                        Font color
                                        <input style="width: 60px"
                                            [style.background]="element.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                            [(colorPicker)]="element.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12"
                                            (click)="element.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                            delete
                                        </mat-icon>
                                        Y-axe
                                        Gridline color
                                        <input style="width: 60px"
                                            [style.background]="element.lineChartOptions.scales.yAxes[0].gridLines.color"
                                            [(colorPicker)]="element.lineChartOptions.scales.yAxes[0].gridLines.color"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12"
                                            (click)="element.lineChartOptions.scales.yAxes[0].gridLines.color = ''">
                                            delete
                                        </mat-icon>
                                        Y-axe
                                        Font color
                                        <input style="width: 60px"
                                            [style.background]="element.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                            [(colorPicker)]="element.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                            (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                            [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                        <mat-icon class="iconsize-12"
                                            (click)="element.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                            delete
                                        </mat-icon>
                                        <mat-form-field>
                                            <mat-label>Select font lables</mat-label>
                                            <mat-select [(value)]="element.lineChartOptions.legend.labels.fontFamily"
                                                (selectionChange)="detectchange()">
                                                <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                    <label [style.font-family]="font.value">{{font.name}}</label>
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field>
                                            <mat-label>Select font X-axe</mat-label>
                                            <mat-select
                                                [(value)]="element.lineChartOptions.scales.xAxes[0].ticks.fontFamily"
                                                (selectionChange)="detectchange()">
                                                <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                    <label [style.font-family]="font.value">{{font.name}}</label>
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field>
                                            <mat-label>Select font Y-axe</mat-label>
                                            <mat-select
                                                [(value)]="element.lineChartOptions.scales.yAxes[0].ticks.fontFamily"
                                                (selectionChange)="detectchange()">
                                                <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                    <label [style.font-family]="font.value">{{font.name}}</label>
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()"
                                                [(ngModel)]="element.lineChartOptions.legend.labels.fontSize" matInput>
                                            <mat-hint>Label -</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()"
                                                [(ngModel)]="element.lineChartOptions.scales.yAxes[0].ticks.fontSize"
                                                matInput>
                                            <mat-hint>X -</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()"
                                                [(ngModel)]="element.lineChartOptions.scales.xAxes[0].ticks.fontSize"
                                                matInput>
                                            <mat-hint>Y -</mat-hint>
                                        </mat-form-field>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>

                            <mat-icon (click)="addgraph(i)">add</mat-icon>
                            <mat-icon (click)="deletegraph(i)">delete</mat-icon>


                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'vectorcombi'" cdkDragHandle
                            [class.selected]="element === selectedelement" cdkDropList
                            (cdkDropListDropped)="dropVectorGroup($event)">
                            <div fxLayout="row">
                                <label *ngIf="!element.groupname">Group</label> &nbsp;
                                <label *ngIf="element.groupname">{{element.groupname}}</label> &nbsp;
                                <label [innerHTML]="element.vectors.length"></label>
                            </div>
                            <mat-icon (click)="deletevcgroup(i)" class="iconsize-12">delete</mat-icon>
                        </mat-expansion-panel-header>

                        <div *ngIf="element.type === 'vectorcombi'" cdkDragHandle>
                            <mat-form-field style="width: 95%;" appearance="outline">
                                <input matTooltip="groupname" [(ngModel)]="element.groupname" type="text" matInput
                                    placeholder="Group name">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-label>Add element</mat-label>
                                <mat-select (selectionChange)="dropVectorGroup($event, element, i)">
                                    <mat-option *ngFor="let potpart of animationarray" [value]="potpart">
                                        <div *ngIf="potpart.type === 'vector'" [innerHTML]="potpart.svgcombi  | safeHtml"
                                            style="height: 20px; width: 20px;">
                                        </div>
                                        <img *ngIf="potpart.type === 'image'" src={{potpart.src}}
                                            style="height: 20px; width: 20px;">
                                        <div *ngIf="potpart.type === 'shape'" style="height: 20px; width: 20px;"
                                            [className]="potpart.style.class" [ngStyle]="potpart.style">
                                        </div>
                                        <div *ngIf="potpart.type === 'chart'">
                                            <mat-icon>graph</mat-icon>
                                        </div>
                                        <div *ngIf="potpart.type === 'text'">
                                            <label>{{potpart.content}}</label>
                                        </div>
    
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-accordion>
                                <mat-expansion-panel *ngFor="let part of element.vectors; let idy = index;">
                                    <mat-expansion-panel-header *ngIf="part.type === 'image'" cdkDragHandle
                                        [class.selected]="part === selectedelement">
                                        <mat-panel-title>
                                            <img *ngIf="part.src" src={{part.src}} class="elementsedit"
                                                style="height: 30px; width: auto;">
                                            <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                            <mat-icon (click)="copyElement(i, part)" matTooltip="Duplicate effect"
                                                class="iconsize-10">
                                                filter_none</mat-icon>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="part.type === 'image'" fxLayout="column">
                                        <app-fileupload *ngIf="!part.src" [account]="Account" [option]="option"
                                            (imgurl)="setImage($event, i)">
                                        </app-fileupload>
                                        <div fxLayout="row wrap" fxLayoutGap="20px">
                                            <button mat-button (click)="imageCropPath()">edit crop</button>
                                            <button mat-button (click)="imageSaveCropPath()">
                                                <mat-icon>save</mat-icon>
                                            </button>
                                            <button mat-button (click)="imageRemoveCrop()">
                                                <mat-icon>delete</mat-icon>
                                            </button>
                                        </div>
                                        <div>
                                            <mat-slide-toggle (change)="detectchange()" [(ngModel)]="part.grey">
                                                Greyscale
                                            </mat-slide-toggle>
                                            <mat-slide-toggle (change)="detectchange()" [(ngModel)]="part.blur">Blur
                                            </mat-slide-toggle>
                                        </div>
                                        <div>
                                            <mat-form-field style="max-width: 46px;">
                                                <input (change)="detectchange()" [(ngModel)]="part.posy" type="number"
                                                    matInput>
                                                <mat-hint>Y |</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field style="max-width: 46px;">
                                                <input (change)="detectchange()" [(ngModel)]="part.posx" type="number"
                                                    matInput>
                                                <mat-hint>X -</mat-hint>
                                            </mat-form-field>
                                        </div>
                                        <div>
                                            <mat-form-field style="max-width: 46px;">
                                                <input (change)="detectchange()" [(ngModel)]="part.style.height"
                                                    matInput>
                                                <mat-hint>Height</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field style="max-width: 46px;">
                                                <input (change)="detectchange()" [(ngModel)]="part.style.width"
                                                    matInput>
                                                <mat-hint>Width</mat-hint>
                                            </mat-form-field>
                                        </div>

                                        <div *ngIf="part.src">
                                            <img style="max-width: 100%;" src={{part.src}} class="elementsedit">
                                            <mat-icon (click)="part.src = ''" class="icon-label" class="iconsize-12">
                                                delete
                                            </mat-icon>
                                        </div>

                                    </div>
                                    <mat-expansion-panel-header *ngIf="part.type === 'text'" cdkDragHandle
                                        [class.selected]="part === selectedelement">
                                        <mat-panel-title>
                                            <label>{{part.content}}</label>
                                            <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                            <mat-icon (click)="copyElement(i, part)" matTooltip="Duplicate effect"
                                                class="iconsize-10">
                                                filter_none</mat-icon>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="part.type === 'text'">

                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.posy" type="number"
                                                matInput>
                                            <mat-hint>Y |</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.posx" type="number"
                                                matInput>
                                            <mat-hint>X -</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.style.height" matInput>
                                            <mat-hint>Height</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.style.width" matInput>
                                            <mat-hint>Width</mat-hint>
                                        </mat-form-field>
                                        <div fxLayout="column">
                                            <div fxLayout="row" fxLayout.xs="column">
                                                <mat-form-field style="width: 95%;" appearance="outline">
                                                    <input matTooltip="insert text" #inputpreview
                                                        [(ngModel)]="part.content" type="text" matInput
                                                        placeholder="element text">
                                                    <mat-icon matTooltip="select Emoji" (click)="onshowemoji(i)"
                                                        matSuffix>
                                                        insert_emoticon</mat-icon>
                                                    <mat-hint align="end">{{inputpreview.value?.length || 0}}/90
                                                    </mat-hint>
                                                </mat-form-field>
                                            </div>
                                            <div fxLayout="row" fxLayout.xs="column" *ngIf="showemoji">
                                                <div fxFlex>
                                                    <div style="width: 100%;
                                                      height: 100%;
                                                      position: absolute;
                                                      top: 8;
                                                      left: 20;
                                                      z-index: 20;">
                                                        <emoji-mart (emojiClick)="setemoji($event, i, part)"
                                                            set="emojione">
                                                        </emoji-mart>
                                                    </div>
                                                </div>
                                            </div>
                                            <div fxLayout="row" fxLayout.xs="column">
                                                <mat-form-field>
                                                    <input [(ngModel)]="part.style['font-size']" type="text" matInput
                                                        placeholder="font size" (change)="detectchange()">
                                                </mat-form-field>
                                            </div>
                                            <div fxLayout="row" fxLayout.xs="column">
                                                <input style="width: 60px;" [style.background]="part.style['color']"
                                                    [cpOutputFormat]="'hex'" [(colorPicker)]="part.style['color']"
                                                    (colorPickerChange)="detectchange()"
                                                    [cpPresetLabel]="'Company colors'"
                                                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                            </div>
                                            <br>
                                            <div fxLayout="row" fxLayout.xs="column">
                                                <mat-form-field>
                                                    <mat-label>Select font</mat-label>
                                                    <mat-select [(value)]="part.style['font-family']"
                                                        (selectionChange)="detectchange()">
                                                        <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                            <label
                                                                [style.font-family]="font.value">{{font.name}}</label>
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>

                                            <div fxLayout="row">
                                                <mat-button-toggle fxFlex (click)="setbold(part)" value="bold">Bold
                                                </mat-button-toggle>
                                                <mat-button-toggle fxFlex (click)="setitalic(part)" value="italic">
                                                    Italic
                                                </mat-button-toggle>
                                            </div>
                                        </div>
                                    </div>
                                    <mat-expansion-panel-header *ngIf="part.type === 'shape'" cdkDragHandle
                                        [class.selected]="part === selectedelement">
                                        <mat-panel-title>
                                            <div [style.width]="'50px'" [style.height]="'50px'" [ngStyle]="part.style"
                                                [className]="part.style.class">
                                            </div>
                                            <div style="height: 30px; width: 30px"
                                                [style.background-color]="part.style['background-color']"></div>
                                            <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                            <mat-icon (click)="copyElement(i, part)" matTooltip="Duplicate effect"
                                                class="iconsize-10">
                                                filter_none</mat-icon>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="part.type === 'shape'">
                                        <mat-form-field>
                                            <mat-select [(value)]="part.shape" (selectionChange)="onChangeShape(part)">
                                                <mat-option value="square">Square</mat-option>
                                                <mat-option value="round">Round</mat-option>
                                                <mat-option value="heart">Heart</mat-option>
                                                <!-- <mat-option value="star">Star</mat-option> -->
                                                <!-- <mat-option value="triangle">Triangle</mat-option> -->
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.posy" type="number"
                                                matInput>
                                            <mat-hint>Y |</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.posx" type="number"
                                                matInput>
                                            <mat-hint>X -</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.style.height" matInput>
                                            <mat-hint>Height</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input (change)="detectchange()" [(ngModel)]="part.style.width" matInput>
                                            <mat-hint>Width</mat-hint>
                                        </mat-form-field>
                                        <div fxLayout="column" *ngIf="part.shape !== 'heart'">
                                            <input style="width: 60px;"
                                                [style.background]="part.style['background-color']"
                                                [(colorPicker)]="part.style['background-color']"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                        </div>
                                    </div>
                                    <mat-expansion-panel-header *ngIf="part.type === 'vector'" cdkDragHandle
                                        [class.selected]="part === selectedelement">
                                        <mat-panel-title>
                                            <!-- <mat-checkbox color="primary" [(ngModel)]="part.selected"></mat-checkbox> -->
                                            <div *ngIf="part.vectors[0].src" [inlineSVG]="part.vectors[0].src"
                                                [onSVGLoaded]="previewSVG" [attr.id]="'previewboxtitle'+ i + idx"
                                                class="elementsedit" style="height: 30px; width: auto;">
                                            </div>
                                            <div *ngIf="!part.vectors[0].src" [innerHTML]="part.svgcombi  | safeHtml"
                                                [attr.id]="'previewboxtitle'+ i + idx"
                                                style="height: 30px; width: 30px;">
                                            </div>
                                            <mat-icon (click)="deleteitemvcgroup(i, idy)" class="iconsize-12">delete
                                            </mat-icon>
                                            <!-- <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate element"
                                                class="iconsize-10">filter_none
                                            </mat-icon> -->
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="part.type === 'vector'">

                                        <div *ngFor="let vector of part.vectors; let idx = index;">
                                            <mat-expansion-panel *ngIf="part.morph">

                                                <mat-expansion-panel-header>
                                                    <div *ngIf="vector.src || vector.svgcombi !== 'undefined'"
                                                        [attr.id]="vector.idx" [inlineSVG]="vector.src"
                                                        [onSVGLoaded]="previewSVG" class="elementsedit"
                                                        style="height: 30px; width: auto;">
                                                    </div>
                                                </mat-expansion-panel-header>

                                                <div *ngIf="vector.src" [inlineSVG]="vector.src"
                                                    style="width: 100px; height: 200px;" id="{{vector.idx}}"
                                                    (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                                </div>
                                                <app-vectorupload *ngIf="!vector.src" [account]="Account"
                                                    [option]="option" (imgurl)="setVector($event, i, idx)">
                                                </app-vectorupload>
                                                <mat-icon (click)="deleteVectorSrc(i, idx, part)" class="icon-label"
                                                    class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                                    (click)="removeVectorPathSelection()">
                                                    delete
                                                </mat-icon>
                                                <mat-icon (click)="seperatePaths(idx, vector, part)" class="icon-label"
                                                    class="iconsize-14" matTooltip="Seperate images parts">
                                                    tab_unselected
                                                </mat-icon>
                                            </mat-expansion-panel>
                                            <div *ngIf="!part.morph">
                                                <div *ngIf="vector.src" [inlineSVG]="vector.src"
                                                    [onSVGLoaded]="previewSVGBig"
                                                    (onSVGInserted)="initVectors($event, i, idx, vector.idx)"
                                                    [attr.id]="vector.idx" style="height: 100px; width: 100px;">
                                                </div>
                                                <!-- <div *ngIf="vector.svgcombi" [inlineSVG]="vector.svgcombi" [attr.id]="vector.idx"
                                                [onSVGLoaded]="previewSVGBig"
                                                (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                            </div> -->

                                                <div *ngIf="!vector.src" style="height: 100px; width: 100px;"
                                                    [attr.id]="vector.idx" [innerHTML]="part.svgcombi | safeHtml"
                                                    (click)="clickVectorPaths($event)"
                                                    (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                                </div>

                                                <app-vectorupload *ngIf="!vector.src && !part.svgcombi"
                                                    [account]="Account" [option]="option"
                                                    (imgurl)="setVector($event, i, idx)">
                                                </app-vectorupload>
                                                <mat-icon (click)="deleteVectorSrc(i, idx, part)" class="icon-label"
                                                    class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                                    (click)="removeVectorPathSelection()">
                                                    delete
                                                </mat-icon>
                                                <mat-icon (click)="seperatePaths(idx, vector, part)" class="icon-label"
                                                    class="iconsize-14" matTooltip="Seperate images parts">
                                                    tab_unselected
                                                </mat-icon>
                                                <mat-form-field style="max-width: 46px;">
                                                    <input (change)="detectchange()" [(ngModel)]="part.posy"
                                                        type="number" matInput>
                                                    <mat-hint>Y |</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field style="max-width: 46px;">
                                                    <input (change)="detectchange()" [(ngModel)]="part.posx"
                                                        type="number" matInput>
                                                    <mat-hint>X -</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field style="max-width: 46px;">
                                                    <input (change)="detectchange()" [(ngModel)]="part.style.height"
                                                        matInput>
                                                    <mat-hint>Height</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field style="max-width: 46px;">
                                                    <input (change)="detectchange()" [(ngModel)]="part.style.width"
                                                        matInput>
                                                    <mat-hint>Width</mat-hint>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <button mat-mini-fab *ngIf="part.morph" class="addbutton"
                                            matTooltip="Add vector" (click)="addNewVectorSrc(i, part)" color="primary">
                                            <mat-icon>add</mat-icon>
                                        </button>
                                    </div>
                                    <mat-expansion-panel-header *ngIf="part.type === 'chart'" cdkDragHandle>
                                        <mat-panel-title>
                                            <mat-icon>show_chart</mat-icon>
                                            <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                            <mat-icon (click)="copyElement(i, part)" matTooltip="Duplicate element"
                                                class="iconsize-10">filter_none</mat-icon>
                                        </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <div *ngIf="part.type === 'chart'">
                                        <mat-accordion>
                                            <mat-expansion-panel>
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Data
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>
                                                <div *ngFor="let label of part.label; let i1 = index;">
                                                    <mat-form-field fxflex>
                                                        <input (change)="detectchangeLabel(i, i1, label)"
                                                            [(ngModel)]="label" type="text" matInput
                                                            placeholder="label">
                                                    </mat-form-field>
                                                </div>
                                                <mat-icon (click)="deletelabel(i, i1)" class="iconsize-12">delete
                                                </mat-icon>
                                                <mat-icon (click)="addLabel(i, i1)">add</mat-icon>
                                                <div *ngFor="let row of part.data; let i1 = index;" fxLayout="column">

                                                    <mat-form-field fxflex>
                                                        <input (change)="detectchangerowlabel(i, i1, row.label)"
                                                            [(ngModel)]="row.label" type="text" matInput>
                                                    </mat-form-field>
                                                    <div fxFlex fxLayout="row wrap">
                                                        <div *ngFor="let cell of row.data; let i2 = index;">
                                                            <mat-form-field fxflex style="width: 20px;">
                                                                <input (change)="detectchangerowcell(i, i1, i2, cell)"
                                                                    [(ngModel)]="cell" type="text" matInput>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <mat-icon (click)="deletecell(i, i1)" class="iconsize-12">delete
                                                    </mat-icon>
                                                    <mat-icon (click)="addcell(i, i1, i2)">add</mat-icon>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>

                                        <mat-accordion>
                                            <mat-expansion-panel>
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Colors
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>
                                                <div *ngFor="let colors of part.colors" fxLayout="column">
                                                    Color Specification
                                                    <input style="width: 60px;"
                                                        [style.background]="colors.backgroundColor"
                                                        [(colorPicker)]="colors.backgroundColor"
                                                        (colorPickerChange)="detectchange()" [cpCancelButton]="true"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                                    <mat-icon class="iconsize-12" (click)="colors.backgroundColor = ''">
                                                        delete
                                                    </mat-icon>
                                                    <input style="width: 60px;" [style.background]="colors.borderColor"
                                                        [(colorPicker)]="colors.borderColor"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.companysecondarycolor]">
                                                    <mat-icon class="iconsize-12" (click)="colors.borderColor = ''">
                                                        delete
                                                    </mat-icon>
                                                    <input style="width: 60px;"
                                                        [style.background]="colors.pointBackgroundColor"
                                                        [(colorPicker)]="colors.pointBackgroundColor"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="colors.pointBackgroundColor = ''">
                                                        delete
                                                    </mat-icon>
                                                    <input style="width: 60px;"
                                                        [style.background]="colors.pointBorderColor"
                                                        [(colorPicker)]="colors.pointBorderColor"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="colors.pointBorderColor = ''">
                                                        delete
                                                    </mat-icon>
                                                </div>

                                            </mat-expansion-panel>
                                        </mat-accordion>

                                        <mat-accordion>
                                            <mat-expansion-panel>
                                                <mat-expansion-panel-header>
                                                    <mat-panel-title>
                                                        Chart type
                                                    </mat-panel-title>
                                                </mat-expansion-panel-header>
                                                <mat-form-field>
                                                    <mat-select [(value)]="part.charttype"
                                                        (selectionChange)="detectchangetype(i, part.charttype)">
                                                        <mat-option value="line">line</mat-option>
                                                        <mat-option value="bar">bar</mat-option>
                                                        <mat-option value="radar">radar</mat-option>
                                                        <mat-option value="pie">pie</mat-option>
                                                        <mat-option value="polarArea">Polararea</mat-option>
                                                        <mat-option value="doughnut">Doughnut</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div fxLayout="column">
                                                    X-Axe
                                                    Gridline color
                                                    <input style="width: 60px"
                                                        [style.background]="part.lineChartOptions.scales.xAxes[0].gridLines.color"
                                                        [(colorPicker)]="part.lineChartOptions.scales.xAxes[0].gridLines.color"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="part.lineChartOptions.scales.xAxes[0].gridLines.color = ''">
                                                        delete
                                                    </mat-icon>
                                                    X-Axe
                                                    Font color
                                                    <input style="width: 60px"
                                                        [style.background]="part.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                                        [(colorPicker)]="part.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="part.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                                        delete
                                                    </mat-icon>
                                                    Y-axe
                                                    Gridline color
                                                    <input style="width: 60px"
                                                        [style.background]="part.lineChartOptions.scales.yAxes[0].gridLines.color"
                                                        [(colorPicker)]="part.lineChartOptions.scales.yAxes[0].gridLines.color"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="part.lineChartOptions.scales.yAxes[0].gridLines.color = ''">
                                                        delete
                                                    </mat-icon>
                                                    Y-axe
                                                    Font color
                                                    <input style="width: 60px"
                                                        [style.background]="part.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                                        [(colorPicker)]="part.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                                        (colorPickerChange)="detectchange()"
                                                        [cpPresetLabel]="'Company colors'"
                                                        [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                                    <mat-icon class="iconsize-12"
                                                        (click)="part.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                                        delete
                                                    </mat-icon>
                                                    <mat-form-field>
                                                        <mat-label>Select font lables</mat-label>
                                                        <mat-select
                                                            [(value)]="part.lineChartOptions.legend.labels.fontFamily"
                                                            (selectionChange)="detectchange()">
                                                            <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                                <label
                                                                    [style.font-family]="font.value">{{font.name}}</label>
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <mat-form-field>
                                                        <mat-label>Select font X-axe</mat-label>
                                                        <mat-select
                                                            [(value)]="part.lineChartOptions.scales.xAxes[0].ticks.fontFamily"
                                                            (selectionChange)="detectchange()">
                                                            <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                                <label
                                                                    [style.font-family]="font.value">{{font.name}}</label>
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <mat-form-field>
                                                        <mat-label>Select font Y-axe</mat-label>
                                                        <mat-select
                                                            [(value)]="part.lineChartOptions.scales.yAxes[0].ticks.fontFamily"
                                                            (selectionChange)="detectchange()">
                                                            <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                                <label
                                                                    [style.font-family]="font.value">{{font.name}}</label>
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <mat-form-field style="max-width: 46px;">
                                                        <input (change)="detectchange()"
                                                            [(ngModel)]="part.lineChartOptions.legend.labels.fontSize"
                                                            matInput>
                                                        <mat-hint>Label -</mat-hint>
                                                    </mat-form-field>
                                                    <mat-form-field style="max-width: 46px;">
                                                        <input (change)="detectchange()"
                                                            [(ngModel)]="part.lineChartOptions.scales.yAxes[0].ticks.fontSize"
                                                            matInput>
                                                        <mat-hint>X -</mat-hint>
                                                    </mat-form-field>
                                                    <mat-form-field style="max-width: 46px;">
                                                        <input (change)="detectchange()"
                                                            [(ngModel)]="part.lineChartOptions.scales.xAxes[0].ticks.fontSize"
                                                            matInput>
                                                        <mat-hint>Y -</mat-hint>
                                                    </mat-form-field>
                                                </div>
                                            </mat-expansion-panel>
                                        </mat-accordion>
                                        <mat-icon (click)="addgraph(i)">add</mat-icon>
                                        <mat-icon (click)="deletegraph(i)">delete</mat-icon>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-accordion *ngIf="whiteboard === true">
                    <mat-expansion-panel [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Draw
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div fxLayout="column">
                            <div>
                                <input style="width: 60px;" [style.background]="whiteboardcolor"
                                    [(colorPicker)]="whiteboardcolor" [cpPresetLabel]="'Company colors'"
                                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                            </div>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="whiteboardstokewidth" type="number" matInput placeholder="Stroke">
                            </mat-form-field>



                            <mat-form-field>
                                <mat-select [(value)]="shapedraw" placeholder="shape">
                                    <mat-option value="">Draw</mat-option>
                                    <mat-option value="rectangle">Rectangle</mat-option>
                                    <mat-option value="circle">Circly</mat-option>
                                    <mat-option value="figure">Figure</mat-option>
                                </mat-select>
                            </mat-form-field>


                            <mat-form-field>
                                <mat-select [(value)]="whiteboardsmoothing" placeholder="Smoothness">
                                    <mat-option value="1">1 - No smoothing</mat-option>
                                    <mat-option value="4">4 - Sharp curves</mat-option>
                                    <mat-option value="8">8 - Smooth curves</mat-option>
                                    <mat-option value="12">12 - Very smooth curves</mat-option>
                                    <mat-option value="16">16 - Super smooth curves</mat-option>
                                    <mat-option value="20">20 - Hyper smooth curves</mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-checkbox [(ngModel)]="closewhiteboard" matTooltip="Connect end-points">Close
                            </mat-checkbox>

                            <button mat-mini-fab matTooltip="Start Draw" (click)="startDraw()" color="primary">
                                <mat-icon>create</mat-icon>
                            </button>

                            <div fxLayout="row">
                                <button mat-mini-fab matTooltip="Save image" (click)="savewhiteboard()" color="primary">
                                    <mat-icon>save</mat-icon>
                                </button>

                                <button mat-mini-fab matTooltip="Delete image" (click)="deletewhiteboard()"
                                    color="primary">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </div>

                        </div>

                    </mat-expansion-panel>
                </mat-accordion>

            </div>

            <div fxLayout="row" fxLayoutGap="4px" style="margin-top: 30px;">
                <label>Snap to grid</label>
                <mat-slide-toggle (change)="setGrid()" [(ngModel)]="snaptogrid"></mat-slide-toggle>
            </div>

            <div fxLayout="row" fxLayoutGap="4px" style="margin-top: 10px;">
                <mat-form-field style="max-width: 46px;">
                    <input (change)="setGrid()" [(ngModel)]="snaptogridwidth" matInput>
                    <mat-hint>Grid width</mat-hint>
                </mat-form-field>
                <mat-form-field style="max-width: 46px;">
                    <input (change)="setGrid()" [(ngModel)]="snaptogridheight" matInput>
                    <mat-hint>Grid height</mat-hint>
                </mat-form-field>
            </div>



            <!-- <div style="margin: 15px; height: 50px;">
                <mat-progress-bar *ngIf="systembusy === true" mode="indeterminate"></mat-progress-bar>
            </div> -->


        </div>
    </div>

    <div ngClass.gt-xs="container-normal" ngClass.lt-sm="container-noshow" [class.container-xs-show]="listviewxsshow"
        fxLayout="column" fxLayoutAlign="start">

        <div *ngIf="selectedVecPath && selectedelement.type === 'vector'">
            <div class="vectorcontrols">

                <mat-icon (click)="editFigurePath()" class="iconsize-18" matTooltip="Change shape path">
                    format_shapes</mat-icon>
                <input matInput autocomplete="off" style="width: 20px; height: 20px;" matTooltip="linethickness"
                    [(ngModel)]="linewidth" (change)="setlinewidth(linewidth)">
                <input autocomplete="off" style="width: 20px; height: 20px;" [style.background]="colorpickline"
                    matTooltip="Line color" [cpToggle]="false" [(colorPicker)]="colorpickline" [cpPosition]="'bottom'"
                    (colorPickerChange)="setColorPathLine(colorpickline)" [cpCancelButton]="true" [cpOKButton]="true"
                    [cpPresetLabel]="'Company colors'"
                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                <input autocomplete="off" style="width: 20px; height: 20px;" [style.background]="colorpick"
                    matTooltip="Fill color" [(colorPicker)]="colorpick" [cpPosition]="'bottom'" [cpCancelButton]="true"
                    [cpOKButton]="true" (colorPickerChange)="setColorPath(colorpick)" [cpPresetLabel]="'Company colors'"
                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                <mat-icon (click)="deleteSelectedVectorPath()" class="iconsize-18" matTooltip="Delete section">
                    delete</mat-icon>
                <mat-icon (click)="deleteWhitespaceSVG()" class="icon-label" class="iconsize-18"
                    matTooltip="delete whitespace">
                    check_box_outline_blank
                </mat-icon>
                <mat-icon (click)="saveAsSeperateVector()" class="iconsize-18" matTooltip="Create seperate section">
                    image</mat-icon>
                <mat-icon (click)="saveAsNewVector()" class="icon-label" class="iconsize-18"
                    matTooltip="save to file as new image">
                    save
                </mat-icon>
                <mat-icon *ngIf="editfigure" (click)="saveFigurePath()" class="icon-label" class="iconsize-20"
                    matTooltip="save Figure">
                    save
                </mat-icon>
                <mat-icon (click)="removeVectorPathMultiSelection()" (click)="removeVectorPathSelection()"
                    class="icon-label" class="iconsize-18" matTooltip="Remove selection">
                    indeterminate_check_box
                </mat-icon>
                <mat-checkbox [(ngModel)]="dragselectvectpath" matTooltip="drag selection tool"
                    (change)="setDragSelect(dragselectvectpath)"></mat-checkbox>
                <mat-checkbox [(ngModel)]="selectmultiplepaths" matTooltip="selected multiple sections"
                    (change)="selectMultiplePaths()"></mat-checkbox>
            </div>
        </div>

        <div *ngIf="selectedelement" class="vectorcontrols">
            <mat-slide-toggle
                *ngIf="selectedelement.type === 'vectorcombi' || selectedelement.groupmember || vectorcombiedit"
                [(ngModel)]="vectorcombiedit" matTooltip="Move seperate sections">Edit
            </mat-slide-toggle>
        </div>


        <div *ngIf="changevideo" [ngStyle]="canvas" style="border: 1px solid grey; overflow:hidden;">

            <!-- selectedVecPath &&  -->
            <video *ngIf="canvas.videourl" preload="auto" class="video-background" no-controls [src]="canvas.videourl"
                #videoPlayer (click)="deSelectAll()">
            </video>

            <audio *ngIf="canvas.audio" [attr.id]="'canvassound'">
                <source type="audio/mp3" [src]="canvas.audio">
            </audio>

            <div *ngIf="canvas.videourl === ''" class="image-background" (click)="deSelectAll()"
                [style.background-image]="canvas['background-image']"></div>


            <div style="height: 100%; width: 100%; position: absolute; z-index: 100; pointer-events: none;"
                id="weathercontainer"></div>

            <div *ngIf="whiteboard === true" class="whiteboard" id="svgElementParent">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                    id="svgElement" width="100%" height="100%"
                    style="fill:transparent; stroke:black; stroke-width: 2px;" viewBox="0 0 500 500"></svg>
            </div>

            <div style="height: 100%; width: 100%; position: absolute; z-index: 1; pointer-events: none;" id="snapgrid">
            </div>

            <div *ngIf="animationarray && changenow" #myBounds id="myBounds"
                [style.background-image]="canvas['background-image']"
                style="overflow: hidden; background-color: transparent;">
                <div *ngFor="let element of animationarray; let i = index" (click)="onSelectElement($event, element)"
                    (mousedown)="setDraggable($event, element)">

                    <div *ngIf="element.motionpath" class="path-edit" [innerHTML]="element.motionpath | safeHtml"
                        [style.width]="canvas.width" [style.height]="canvas.height"
                        [ngStyle]="{'z-index':editpath === true && element === selectedelement ? 1000 : -1 }">
                    </div>
                    <div *ngIf="element.type === 'image' && !element.groupmember" id="{{element.id}}"
                        [attr.id]="element.id" [ngStyle]="element.style" [style.width]="element.style.width"
                        [style.height]="element.style.height" (rzResizing)="onResizing($event, i)"
                        [ngResizable]="element === selectedelement" [rzAspectRatio]="true" class="elementanimationarray"
                        [class.elementanimationarrayselected]="element === selectedelement">
                        <div [ngStyle]="{'z-index':cropimages === true && element === selectedelement ? 1000 : -1 }"
                            class="whiteboard">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                version="1.1" [attr.id]="element.id + 'crop'" width="100%" height="100%"
                                style="fill:transparent; stroke:black; stroke-width: 2px;" viewBox="0 0 500 500">
                                <defs>
                                    <!-- d={{element.clippath}}  d="M100,100 L150,100 L150,150 z" -->
                                    <clipPath [attr.id]="element.id + 'cropclip'">
                                        <path [attr.d]="element.clippath" [attr.id]="element.id + 'croppath'" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <img *ngIf="element.src" style="width: 100%; height: 100%;" src={{element.src}}
                            [class.imggreyclass]="element.grey" [class.imgblur]="element.blur">
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </div>

                    <label (dblclick)="setEditText()" [ngResizable]="element === selectedelement"
                        *ngIf="element.type === 'text' && !edittext && !element.groupmember" id="{{element.id}}"
                        [attr.id]="element.id" (rzResizing)="onResizing($event, i)" [ngStyle]="element.style"
                        [rzAspectRatio]="false" class="elementanimationarray"
                        [class.elementanimationarrayselected]="element === selectedelement">{{element.content}}
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </label>
                    <mat-form-field
                        *ngIf="element.type === 'text' && edittext && element === selectedelement && !element.groupmember"
                        id="{{element.id}}" [attr.id]="element.id" [ngStyle]="element.style"
                        class="elementanimationarray">
                        <textarea matInput [(ngModel)]="element.content" style="width: 100%; height: 100%;"></textarea>
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </mat-form-field>

                    <!-- https://stackoverflow.com/questions/43511437/how-to-use-ng2-ckeditor-as-inline -->


                    <div *ngIf="element.type === 'shape' && !element.groupmember" id="{{element.id}}"
                        [style.width]="element.style.width" [style.height]="element.style.height"
                        (rzResizing)="onResizing($event, i)" [ngResizable]="element === selectedelement"
                        [ngClass]="{'elementanimationarray':true, elementanimationarrayselected: element === selectedelement }"
                        [class]='element.style.class' [rzAspectRatio]="element.shape === 'heart'"
                        [ngStyle]="element.style">
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </div>
                    <!--   [style.transform]="'translate(' + element.posx + 'px, ' + element.posy +'px) rotate(' + element.rotation + 'deg)' | safe: 'style'"                    -->
                    <div *ngIf="element.type === 'chart' && !element.groupmember" [style.width]="element.style.width"
                        [style.height]="element.style.height" [ngStyle]="element.style" class="elementanimationarray"
                        [class.elementanimationarrayselected]="element === selectedelement"
                        (rzResizing)="onResizing($event, i)" [ngResizable]="element === selectedelement"
                        [rzAspectRatio]="false" id="{{element.id}}">
                        <canvas baseChart width="element.style.width" height="element.style.height"
                            [datasets]="element.productiondata" [labels]="element.label" [colors]="element.colors"
                            [legend]="element.legend" [options]="element.lineChartOptions"
                            [chartType]="element.charttype" [plugins]="lineChartPlugins"
                            [attr.id]="'chart' + element.id">
                        </canvas>
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </div>
                    <div *ngIf="element.type === 'vector' && !element.groupmember" [style.width]="element.style.width"
                        [style.height]="element.style.height" [ngStyle]="element.style"
                        (rzResizing)="onResizing($event, i)" [ngResizable]="element === selectedelement"
                        [rzAspectRatio]="false" id="{{element.id}}" class="elementanimationarray"
                        [class.elementanimationarrayselected]="element === selectedelement">
                        <div style="height: 100%; width: 100%; cursor: pointer;"
                            [innerHTML]="element.svgcombi | safeHtml" (click)="clickVectorPaths($event)">
                        </div>
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </div>


                    <div *ngIf="element.type === 'vectorcombi'" [style.width]="element.style.width"
                        [style.height]="element.style.height" id="{{element.id}}" [ngStyle]="element.style"
                        [ngClass]="{elementanimationarrayselected: element === selectedelement, editcombi: vectorcombiedit, elementanimationarray: true}">
                        <div *ngFor="let part of element.vectors; let idy = index;"
                            (click)="onSelectElement($event, part)" (mousedown)="setDraggable($event, part)">
                            <!-- <div *ngIf="part.motionpath" class="path-edit" [innerHTML]="part.motionpath | safeHtml"
                                [style.width]="canvas.width" [style.height]="canvas.height"
                                [ngStyle]="{'z-index':editpath === true && element === selectedelement ? 1000 : -1 }">
                            </div> -->
                            <div *ngIf="part.type === 'image' && part.groupmember" [attr.id]="part.id"
                                [ngStyle]="part.style" [style.width]="part.style.width"
                                [style.height]="part.style.height" (rzResizing)="onResizing($event, i)"
                                [ngResizable]="part === selectedelement" [rzAspectRatio]="true"
                                class="elementanimationarray"
                                [class.elementanimationarrayselected]="part === selectedelement && vectorcombiedit">
                                <div [ngStyle]="{'z-index':cropimages === true && part === selectedelement ? 1000 : -1 }"
                                    class="whiteboard">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        version="1.1" [attr.id]="part.id + 'crop'" width="100%" height="100%"
                                        style="fill:transparent; stroke:black; stroke-width: 2px;"
                                        viewBox="0 0 500 500">
                                        <defs>
                                            <clipPath [attr.id]="part.id + 'cropclip'">
                                                <path [attr.d]="part.clippath" [attr.id]="part.id + 'croppath'" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </div>
                                <img *ngIf="part.src" style="width: 100%; height: 100%;" src={{part.src}}
                                    [class.imggreyclass]="part.grey" [class.imgblur]="part.blur">
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </div>
                            <label (dblclick)="setEditText()" [ngResizable]="part === selectedelement"
                                *ngIf="part.type === 'text' && !edittext && part.groupmember" id="{{part.id}}"
                                [attr.id]="part.id" (rzResizing)="onResizing($event, i)" [ngStyle]="part.style"
                                [rzAspectRatio]="false" class="elementanimationarray"
                                [class.elementanimationarrayselected]="part === selectedelement">{{part.content}}
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </label>
                            <mat-form-field
                                *ngIf="part.type === 'text' && edittext && part === selectedelement && part.groupmember"
                                id="{{part.id}}" [attr.id]="part.id" [ngStyle]="part.style"
                                class="elementanimationarray">
                                <textarea matInput [(ngModel)]="part.content"
                                    style="width: 100%; height: 100%;"></textarea>
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </mat-form-field>
                            <div *ngIf="part.type === 'shape' && part.groupmember" id="{{part.id}}"
                                [style.width]="part.style.width" [style.height]="part.style.height"
                                (rzResizing)="onResizing($event, i)" [ngResizable]="part === selectedelement"
                                [ngClass]="{'elementanimationarray':true, elementanimationarrayselected: element === selectedelement }"
                                [class]='part.style.class' [rzAspectRatio]="part.shape === 'heart'"
                                [ngStyle]="part.style">
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </div>
                            <div *ngIf="part.type === 'chart' && part.groupmember" [style.width]="part.style.width"
                                [style.height]="part.style.height" [ngStyle]="part.style" class="elementanimationarray"
                                [class.elementanimationarrayselected]="part === selectedelement"
                                (rzResizing)="onResizing($event, i)" [ngResizable]="part === selectedelement"
                                [rzAspectRatio]="false" id="{{part.id}}">
                                <canvas baseChart width="part.style.width" height="part.style.height"
                                    [datasets]="part.productiondata" [labels]="part.label" [colors]="part.colors"
                                    [legend]="part.legend" [options]="part.lineChartOptions"
                                    [chartType]="part.charttype" [plugins]="lineChartPlugins"
                                    [attr.id]="'chart' + part.id">
                                </canvas>
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </div>
                            <div *ngIf="part.type === 'vector' && part.groupmember" [style.width]="part.style.width"
                                [style.height]="part.style.height" [ngStyle]="part.style"
                                (rzResizing)="onResizing($event, i)"
                                [ngResizable]="vectorcombiedit && part === selectedelement" [rzAspectRatio]="false"
                                id="{{part.id}}" class="elementanimationarray"
                                [ngStyle]="{'z-index':vectorcombiedit === true && element === selectedelement ? 1000 : -1 }"
                                [class.elementanimationarrayselected]="part === selectedelement && vectorcombiedit">
                                <div style="height: 100%; width: 100%; cursor: pointer;"
                                    [innerHTML]="part.svgcombi | safeHtml" (click)="clickVectorPaths($event)">
                                </div>
                                <mat-icon *ngIf="vectorcombiedit && part === selectedelement" class="iconsize-4"
                                    class="rotatehandle" #rotatehandle [attr.id]="part.id + 'rotatehandle'">replay
                                </mat-icon>
                            </div>
                        </div>
                        <mat-icon *ngIf="element === selectedelement" class="iconsize-4" class="rotatehandle"
                            #rotatehandle [attr.id]="element.id + 'rotatehandle'">replay</mat-icon>
                    </div>


                    <!-- style="overflow: hidden;"  -->
                    <!-- not visible object to connect sound to  -->
                    <div *ngFor="let part of element.animation; let i = index;">
                        <audio *ngIf="part.audioeffectsrc" [attr.id]="element.id + i + 's'">
                            <source type="audio/mp3" [src]="part.audioeffectsrc">
                        </audio>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>