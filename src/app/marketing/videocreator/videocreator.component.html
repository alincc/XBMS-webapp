<div class="savetobutton">
    <button mat-fab color="primary" matTooltip="Convert to video" (click)="converttovideo()">
        <mat-icon>video_library</mat-icon>
    </button>
    <button mat-mini-fab color="primary" matTooltip="Save video" (click)="saveVideo()">
        <mat-icon>save</mat-icon>
    </button>
    <button mat-mini-fab color="primary" matTooltip="Convert to GIF" (click)="converttogif()">
        <mat-icon>gif</mat-icon>
    </button>
</div>
<div class="editbutton">
    <button mat-icon-button [matMenuTriggerFor]="menumarketing" class="menu">
        <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menumarketing="matMenu">
        <button mat-menu-item (click)="resetVideo()">
            <mat-icon>delete</mat-icon>
            <span>Reset</span>
        </button>
        <button mat-menu-item (click)="resetVideo()">
            <mat-icon>note_add</mat-icon>
            <span>New</span>
        </button>
        <mat-form-field>
            <mat-label>Edit existing element</mat-label>
            <mat-select [(value)]="editablevideo">
                <mat-option *ngFor="let editvideo of editablevideos" [value]="editvideo">
                    {{editvideo.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <button mat-menu-item (click)="loadEditableVideo()">Start edit</button>
    </mat-menu>
</div>





<div class="videocontrols" fxLayout="column">
    <div fxLayout="row" fxLayoutGap="4px">
        <button mat-mini-fab color="primary" (click)="playFunc()">
            <mat-icon>play_circle_outline</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="stopFunc()">
            <mat-icon>stop</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="pauseFunc()">
            <mat-icon>pause_circle_outline</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="reverseFunc()">
            <mat-icon>fast_rewind</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="fastforwardFunc()">
            <mat-icon>fast_forward</mat-icon>
        </button>
        <mat-icon *ngIf="setreplay === false" color="primary" (click)="setReplay()">replay</mat-icon>
        <mat-icon *ngIf="setreplay === true" color="accent" (click)="setReplay()">replay</mat-icon>

    </div>
    <div fxLayout="row">
        <!-- <label>Timeline lenght &nbsp; </label>  -->
        <mat-slider matTooltip="Timeline length" (input)="onSliderChange($event)" thumbLabel [displayWith]="formatLabel"
            tickInterval="1" min="1" max="600"></mat-slider>
        <label>{{counter}} &nbsp; sec</label>
    </div>
    <div fxLayout="row">
        <label>{{ currenttime | number : '1.2-2'}}</label>
        <div class="timelinesmall-container" [style.width]="'200px'">
            <div class="timelinesmall-active" [style.width]="counter + 'px'" #timelinebound id="timelinebound">
                <div class="timelinesmall-setter" [style.transform]="'translate(' + currenttime + 'px, 0px)'"
                    [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                     [scale]="'1'"></div>
            </div>
        </div>
    </div>

</div>

<div style="width: 100%; margin: 10px 0px 10px 0px;" (swipeleft)="swipeleft($event)" (swiperight)="swiperight($event)"
    *ngIf="animationarray.length > 0">

    <mat-accordion style="width: 100%">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-form-field>
                        <input [(ngModel)]="elementname" type="text" matInput placeholder="Video Name">
                    </mat-form-field>


                </mat-panel-title>
            </mat-expansion-panel-header>

            <div fxLayout="row wrap" fxLayoutGap="20px">

                <mat-form-field fxFlex>
                    <input (change)="onchangevideo()" [(ngModel)]="canvas.width" type="text" matInput
                        placeholder="width">
                    <label matSuffix>px</label>
                </mat-form-field>

                <mat-form-field fxFlex>
                    <input (change)="onchangevideo()" [(ngModel)]="canvas.height" type="text" matInput
                        placeholder="height">
                    <label matSuffix>px</label>
                </mat-form-field>

                <app-videoupload *ngIf="!canvas.videourl" [account]="Account" [option]="option"
                    (imgurl)="setVideo($event)">
                </app-videoupload>

                <app-background *ngIf="!canvas.videourl" [account]="Account" [option]="option"
                    (imgurl)="setBackground($event)">
                </app-background>

                <!-- <video *ngIf="canvas.videourl" fxFlex style="width: 200px; height: 200px;"
                    src={{canvas.videourl}}></video> -->

                <mat-form-field fxFlex *ngIf="canvas.videourl">
                    <input (change)="onchangevideo()" [(ngModel)]="canvas.videourl" type="text" matInput
                        placeholder="height">
                </mat-form-field>

                <input fxFlex style="width: 150px; height: 30px;" [style.background]="canvas['background-color']"
                    [cpToggle]="false" [(colorPicker)]="canvas['background-color']" [cpPosition]="'bottom'"
                    (colorPickerChange)="onchangevideo()" [cpCancelButton]="true" [cpPresetLabel]="'Company colors'"
                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">

                <mat-slide-toggle fxFlex *ngIf="canvas.videourl" [(ngModel)]="canvas.loop">Loop</mat-slide-toggle>

                <mat-form-field>
                    <mat-select [(value)]="canvas.weather" (selectionChange)="detectchange()"
                        placeholder="Select weather">
                        <mat-option value="">None</mat-option>
                        <mat-option value="rain">Rain</mat-option>
                        <mat-option value="snow">Snow</mat-option>
                        <mat-option value="leaves">Leaves</mat-option>
                    </mat-select>
                </mat-form-field>

                <!-- <button mat-mini-fab color="primary" (click)="addSnowEffect()">
                    <mat-icon>grain</mat-icon>
                </button> -->
            </div>

        </mat-expansion-panel>
    </mat-accordion>

    <!-- <button mat-button (click)="getEditFile()">get elements</button> -->



    <div *ngIf="selectedelement" fxLayout="column">
        <div *ngFor="let animation of selectedelement.animation; let i = index;">
            <mat-accordion>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <label style="width: 300px;">{{animation.anim_type}}</label>
                            <mat-icon (click)="deleteEffect(i)" matTooltip="Delete effect" class="iconsize-10">delete
                            </mat-icon>
                            <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                filter_none</mat-icon>

                            <div class="timeline-container" [style.width]="'6000px'">
                                <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                    id="timelinebound">
                                    <div class="timeline-setter"
                                        [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                        [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                        (movingOffset)="onMovingTimeline($event, i, animation)" [scale]="'1'"></div>

                                    <div class="timeline-currentelement" ngDraggable [scale]="'1'"
                                        (movingOffset)="onMovingAnimationEl($event, i, animation)"
                                        [lockAxis]="'y'"
                                        [preventDefaultEvent]="true" ngResizable 
                                        [rzHandles]="'e, w'" (rzResizing)="onResizeAnimationEl($event, i, animation)"
                                        [style.width]="animation.duration * 10 + 'px'">
                                    </div>
                                </div>
                            </div>
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div fxLayout="row">
                        <!-- <label>Effects &nbsp;</label> -->
                        <mat-form-field>
                            <mat-select [(value)]="animation.anim_type" (selectionChange)="detectchange()">
                                <mat-option value="rotation">Rotate</mat-option>
                                <!-- <mat-option value="translate">Translate</mat-option> -->
                                <mat-option value="scale">Scale</mat-option>
                                <mat-option value="skew">Skew</mat-option>
                                <mat-option value="appear">Appear</mat-option>
                                <!-- <mat-option value="disappear">Disappear</mat-option> -->
                                <mat-option value="move">Move</mat-option>
                                <mat-option value="fountain">Fountain</mat-option>
                                <mat-option value="followminions">Minions</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="animation.easetype" (selectionChange)="detectchange()">
                                <mat-option value="">None</mat-option>
                                <mat-option value="linear">Linear</mat-option>
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="elastic">Elastic</mat-option>
                                <mat-option value="circle">Circle</mat-option>
                                <mat-option value="sine">Sine</mat-option>
                                <mat-option value="over">Over</mat-option>
                                <mat-option value="easy">Easy</mat-option>
                                <mat-option value="slowmotion">Slowmotion</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="animation.fromto" (selectionChange)="detectchange()">
                                <mat-option value="from">From</mat-option>
                                <mat-option value="to">To</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.duration" type="number" step="0.1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.start_time" type="number" step="0.1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="animation.repeat" type="number" step="1" min="-1" matInput
                                (change)="detectchange()">
                            <mat-hint>repeat</mat-hint>
                        </mat-form-field>
                        <mat-checkbox [(ngModel)]="animation.yoyo" (change)="detectchange()"
                            matTooltip="Reset when repeated">Fluent</mat-checkbox>
                        <div *ngIf="animation.anim_type === 'rotation'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.rotationcycle" type="number" step="0.1" min="0" matInput
                                    (change)="detectchange()">
                                <mat-hint>Rotation</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginX" matInput (change)="detectchange()">
                                <mat-hint>distance from bottom object</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.transformOriginY" matInput (change)="detectchange()">
                                <mat-hint>distance from top object</mat-hint>
                            </mat-form-field>
                        </div>
                        <div *ngIf="animation.anim_type === 'scale'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.scalesize" type="number" step="0.1" min="0" matInput>
                                <mat-hint>Scale</mat-hint>
                            </mat-form-field>
                        </div>
                        <div *ngIf="animation.anim_type === 'bounce'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                        </div>
                        <div *ngIf="animation.anim_type === 'skew'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.skewY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.skewX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                        </div>
                        <div *ngIf="animation.anim_type === 'move'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                            <button mat-button (click)="editMotionPath()">Edit path</button>
                            <button mat-button (click)="saveNewMotionPath()">Save path</button>

                        </div> 

                        <div *ngIf="animation.anim_type === 'followminions'">
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocY" type="number" matInput>
                                <mat-hint>Y-axe</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input [(ngModel)]="animation.travellocX" type="number" matInput>
                                <mat-hint>X-axe</mat-hint>
                            </mat-form-field>
                            <button mat-button
                                (click)="animation.travellocY = selectedelement.posy; animation.travellocX = selectedelement.posx">Reset</button>
                            <button mat-button (click)="editMotionPath()">Edit path</button>
                            <button mat-button (click)="saveNewMotionPath()">Save path</button>
                        </div>
                    </div>
                </mat-expansion-panel>
            </mat-accordion>

        </div>
        <button mat-button (click)="addNewEffect(animation)">Add new effect</button>

        <div *ngIf="selectedelement.type === 'vector'" fxLayout="column">
            <div *ngFor="let vectoranimation of selectedelement.vectoranimation; let iv = index">
                <mat-accordion>
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <label style="width: 300px;">{{vectoranimation.svganimationtype}}</label>
                                <mat-icon (click)="deleteVectorAnimation(iv)" class="iconsize-10">delete</mat-icon>
                                <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                    filter_none</mat-icon>
                                <div class="timeline-container" [style.width]="'6000px'">
                                    <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                        id="timelinebound">
                                        <div class="timeline-setter"
                                            [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                            [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                            (movingOffset)="onMovingTimeline($event, i, animation)">
                                        </div>
                                        <div class="timeline-currentelement" ngDraggable
                                            (movingOffset)="onMovingAnimationEl($event, i, vectoranimation)"
                                            [bounds]="timelinebound" [inBounds]="true" [lockAxis]="'y'" ngResizable
                                            rzContainment="#timelinebound" [rzHandles]="'e, w'"
                                            (rzResizing)="onResizeAnimationEl($event, iv, vectoranimation)"
                                            [style.width]="vectoranimation.duration * 10 + 'px'">
                                        </div>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="vectoranimation.duration" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="vectoranimation.start_time" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="vectoranimation.svganimationtype" (selectionChange)="detectchange()"
                                (selectionChange)="detectMorph(vectoranimation.svganimationtype)"
                                placeholder="Animation">
                                <mat-option value="">None</mat-option>
                                <mat-option value="draw">Draw</mat-option>
                                <mat-option value="morph">Morph</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-checkbox [(ngModel)]=vectoranimation.hideimage>Hide Image</mat-checkbox>
                        <!-- (click)="setSvgOpacity(selectedelement, idx)" -->
                        <div *ngIf="vectoranimation.svganimationtype">
                            <mat-form-field>
                                <mat-select [(value)]="vectoranimation.easetype" (selectionChange)="detectchange()"
                                    placeholder="Animation">
                                    <mat-option value="">None</mat-option>
                                    <mat-option value="linear">Linear</mat-option>
                                    <mat-option value="bounce">Bounce</mat-option>
                                    <mat-option value="elastic">Elastic</mat-option>
                                    <mat-option value="circle">Circle</mat-option>
                                    <mat-option value="sine">Sine</mat-option>
                                    <mat-option value="over">Over</mat-option>
                                    <mat-option value="easy">Easy</mat-option>
                                    <mat-option value="slowmotion">Slowmotion</mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field>
                                <mat-select [(value)]="vectoranimation.fromto" (selectionChange)="detectchange()">
                                    <mat-option value="from">From</mat-option>
                                    <mat-option value="to">To</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <div *ngIf="vectoranimation.svganimationtype === 'draw'" fxLayout="row">

                                <!-- <mat-slide-toggle [(ngModel)]=vectoranimation.yoyo fxFlex (change)="detectchange()">Yoyo
                                    effect</mat-slide-toggle> -->

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.repeat" type="number" matInput
                                        (change)="detectchange()">
                                    <mat-hint>Repeat</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.linethickness" matInput
                                        (change)="detectchange()">
                                    <mat-hint>Thickness</mat-hint>
                                </mat-form-field>

                                <div style="max-width: 150px; height: 30px;" fxFlex>
                                    <input style="max-width: 150px; height: 30px;" (change)="detectchange()"
                                        [style.background]="vectoranimation.drawcolor" [cpToggle]="false"
                                        [(colorPicker)]="vectoranimation.drawcolor" [cpCancelButton]="true"
                                        [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.fillleft" matInput (change)="detectchange()">
                                    <mat-hint>Start fill left</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.fillright" matInput (change)="detectchange()">
                                    <mat-hint>Start fill right</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.drawleft" matInput (change)="detectchange()">
                                    <mat-hint>Draw left</mat-hint>
                                </mat-form-field>

                                <mat-form-field style="max-width: 46px;" fxFlex>
                                    <input [(ngModel)]="vectoranimation.drawright" matInput (change)="detectchange()">
                                    <mat-hint>Draw right</mat-hint>
                                </mat-form-field>

                                <!-- deduct percentage from draw  percentage  {drawSVG:"100%"}, {drawSVG:"50% 50%"}, 0.1) -->

                            </div>

                            <div *ngIf="vectoranimation.svganimationtype === 'morph'" fxLayout="row">

                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <button mat-button (click)="addVectorAnimation(selectedelement)">Add new Vector effect</button>
        </div>

        <div *ngIf="selectedelement.type === 'text'" fxLayout="column">
            <div *ngFor="let textanimation of selectedelement.splittextanimation; let iv = index">
                <mat-accordion>
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <label style="width: 300px;">{{textanimation.textanimationtype}}</label>
                                <mat-icon (click)="deleteTextAnimation(i)" class="iconsize-10">delete</mat-icon>
                                <mat-icon (click)="copyEffect(i)" matTooltip="Duplicate effect" class="iconsize-10">
                                    filter_none</mat-icon>
                                <div class="timeline-container" [style.width]="'6000px'">
                                    <div class="timeline-active" [style.width]="counter * 10 + 'px'" #timelinebound
                                        id="timelinebound">
                                        <div class="timeline-setter"
                                            [style.transform]="'translate(' + currenttime * 10 + 'px, 0px)'"
                                            [inBounds]="true" [bounds]="timelinebound" [lockAxis]="'y'" ngDraggable
                                            (movingOffset)="onMovingTimeline($event, i, animation)">
                                        </div>
                                        <div class="timeline-currentelement" ngDraggable
                                            (movingOffset)="onMovingAnimationEl($event, i, textanimation)"
                                            [bounds]="timelinebound" [inBounds]="true" [lockAxis]="'y'" ngResizable
                                            rzContainment="#timelinebound" [rzHandles]="'e, w'"
                                            (rzResizing)="onResizeAnimationEl($event, iv, textanimation)"
                                            [style.width]="textanimation.duration * 10 + 'px'">
                                        </div>
                                    </div>
                                </div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.duration" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Duration</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.start_time" type="number" step="0.1" min="0" matInput>
                            <mat-hint>Start</mat-hint>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.textanimationtype" (selectionChange)="detectchange()"
                                placeholder="Animation">
                                <mat-option value="chars">By character</mat-option>
                                <mat-option value="chars">By character</mat-option>
                                <mat-option value="words">By word</mat-option>
                                <mat-option value="lines">By line</mat-option>
                                <!-- <mat-option value="all">All</mat-option> -->
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.easetype" (selectionChange)="detectchange()"
                                placeholder="Animation">
                                <mat-option value="">None</mat-option>
                                <mat-option value="linear">Linear</mat-option>
                                <mat-option value="bounce">Bounce</mat-option>
                                <mat-option value="elastic">Elastic</mat-option>
                                <mat-option value="circle">Circle</mat-option>
                                <mat-option value="sine">Sine</mat-option>
                                <mat-option value="over">Over</mat-option>
                                <mat-option value="easy">Easy</mat-option>
                                <mat-option value="slowmotion">Slowmotion</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-select [(value)]="textanimation.fromto" (selectionChange)="detectchange()">
                                <mat-option value="from">From</mat-option>
                                <mat-option value="to">To</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.repeat" type="number" matInput (change)="detectchange()">
                            <mat-hint>Repeat</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.x" type="number" step="1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>X</mat-hint>
                        </mat-form-field>
                        <mat-form-field style="max-width: 46px;">
                            <input [(ngModel)]="textanimation.y" type="number" step="1" min="0" matInput
                                (change)="detectchange()">
                            <mat-hint>Y</mat-hint>
                        </mat-form-field>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>

    </div>
    <!-- <mat-card fxLayout="column">


    </mat-card> -->
</div>


<div class="tabcontainer" fxLayout="row" cdkDropListGroup (swipeleft)="swipeleft($event)"
    (swiperight)="swiperight($event)">
    <!-- to do: add magic wand toosl -->

    <div class="card-left-menu" ngClass.gt-xs="listview-normal" ngClass.lt-sm="listview-noshow"
        [class.listview-xs-show]="listviewxsshow" fxLayout="column">
        <!-- <label>Edit</label> -->
        <div fxLayout="column">
            <div fxLayout="column" fxLayout.xs="column">
                <mat-accordion cdkDropList (cdkDropListDropped)="drop($event)">
                    <mat-expansion-panel *ngFor="let element of animationarray; let i = index" cdkDrag
                        (click)="onSelectElement(element)">
                        <mat-expansion-panel-header *ngIf="element.type === 'image'" cdkDragHandle>
                            <mat-panel-title>
                                <img *ngIf="element.src" src={{element.src}} class="elementsedit"
                                    style="height: 30px; width: auto;">
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>

                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'image'">

                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <div *ngIf="element.src">
                                <img style="max-width: 100%;" src={{element.src}} class="elementsedit">
                                <mat-icon (click)="element.src = ''" class="icon-label" class="iconsize-12">delete
                                </mat-icon>
                            </div>
                            <app-fileupload *ngIf="!element.src" [account]="Account" [option]="option"
                                (imgurl)="setImage($event, i)">
                            </app-fileupload>
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'text'" cdkDragHandle>
                            <mat-panel-title>
                                <label>{{element.content}}</label>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'text'">

                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <div fxLayout="column">
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field style="width: 95%;" appearance="outline">
                                        <input matTooltip="insert text" #inputpreview [(ngModel)]="element.content"
                                            type="text" matInput placeholder="element text">
                                        <mat-icon matTooltip="select Emoji" (click)="onshowemoji(i)" matSuffix>
                                            insert_emoticon</mat-icon>
                                        <mat-hint align="end">{{inputpreview.value?.length || 0}}/90</mat-hint>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column" *ngIf="showemoji">
                                    <div fxFlex>
                                        <div style="width: 100%;
                                          height: 100%;
                                          position: absolute;
                                          top: 8;
                                          left: 20;
                                          z-index: 20;">
                                            <emoji-mart (emojiClick)="setemoji($event, i, element)" set="emojione">
                                            </emoji-mart>
                                        </div>
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field>
                                        <input [(ngModel)]="element.style['font-size']" type="text" matInput
                                            placeholder="font size" (change)="detectchange()">
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <input style="width: 230px;" [style.background]="element.style['color']"
                                        [cpOutputFormat]="'hex'" [(colorPicker)]="element.style['color']"
                                        (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div>
                                <br>
                                <div fxLayout="row" fxLayout.xs="column">
                                    <mat-form-field>
                                        <mat-label>Select font</mat-label>
                                        <mat-select [(value)]="element.style['font-family']"
                                            (selectionChange)="detectchange()">
                                            <mat-option *ngFor="let font of Fonts" [value]="font.value">
                                                <label [style.font-family]="font.value">{{font.name}}</label>
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row">
                                    <mat-button-toggle fxFlex (click)="setbold(element)" value="bold">Bold
                                    </mat-button-toggle>
                                    <mat-button-toggle fxFlex (click)="setitalic(element)" value="italic">Italic
                                    </mat-button-toggle>
                                </div>

                            </div>


                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'shape'" cdkDragHandle>
                            <mat-panel-title>
                                <div style="height: 30px; width: 30px"
                                    [style.background-color]="element.style['background-color']"></div>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'shape'">
                            <mat-form-field>
                                <mat-select [(value)]="element.shape" (selectionChange)="onChangeShape(element)">
                                    <mat-option value="square">Square</mat-option>
                                    <mat-option value="round">Round</mat-option>
                                    <mat-option value="heart">Heart</mat-option>
                                    <!-- <mat-option value="star">Star</mat-option> -->
                                    <!-- <mat-option value="triangle">Triangle</mat-option> -->
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <div fxLayout="column" *ngIf="element.shape !== 'heart'">
                                <input style="width: 230px;" [style.background]="element.style['background-color']"
                                    [(colorPicker)]="element.style['background-color']"
                                    (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                            </div>
                            <!-- <div fxLayout="column" *ngIf="element.shape === 'heart'">
                                    <input style="width: 230px;" [style.background]="element.style['background-color']"
                                        [(colorPicker)]="element.style['background-color']"
                                        (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                        [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                </div> -->
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'whiteboard'" cdkDragHandle>
                            <mat-panel-title>
                                <div style="height: 30px; width: 30px"
                                    [style.background-color]="element.style['background-color']"></div>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate effect"
                                    class="iconsize-10">
                                    filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'whiteboard'">
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posy" type="number" matInput>
                                <mat-hint>Y |</mat-hint>
                            </mat-form-field>
                            <mat-form-field style="max-width: 46px;">
                                <input (change)="detectchange()" [(ngModel)]="element.posx" type="number" matInput>
                                <mat-hint>X -</mat-hint>
                            </mat-form-field>
                            <div fxLayout="column">
                                <input style="width: 230px;" [style.background]="element.style['background-color']"
                                    [(colorPicker)]="element.style['background-color']"
                                    (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                    [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                            </div>
                        </div>
                        <mat-expansion-panel-header *ngIf="element.type === 'vector'" cdkDragHandle>
                            <mat-panel-title>
                                <mat-checkbox color="primary" [(ngModel)]="element.selected"></mat-checkbox>
                                <!-- <div *ngIf="element.svgcombi" [innerHTML]="element.svgcombi | safeHtml"
                                    class="elementsedit" style="height: 30px; width: 30px;"></div> -->
                                <div *ngIf="element.vectors[0].src" [inlineSVG]="element.vectors[0].src"
                                    [onSVGLoaded]="previewSVG" id="previewbox" class="elementsedit"
                                    style="height: 30px; width: auto;">
                                </div>
                                <div *ngIf="!element.vectors[0].src" [innerHTML]="element.svgcombi  | safeHtml">
                                </div>
                                <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                <mat-icon (click)="copyElement(i, element)" matTooltip="Duplicate element"
                                    class="iconsize-10">filter_none</mat-icon>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="element.type === 'vector'">

                            <div *ngFor="let vector of element.vectors; let idx = index;">
                                <mat-expansion-panel *ngIf="element.morph">
                                    <!-- <mat-form-field style="max-width: 46px;">
                                            <input [(ngModel)]="vector.duration" type="number" step="0.1" min="0"
                                                matInput>
                                            <mat-hint>Duration</mat-hint>
                                        </mat-form-field>
                                        <mat-form-field style="max-width: 46px;">
                                            <input [(ngModel)]="vector.start_time" type="number" step="0.1" min="0"
                                                matInput>
                                            <mat-hint>Start</mat-hint>
                                        </mat-form-field> -->
                                    <mat-expansion-panel-header>
                                        <div *ngIf="vector.src || vector.svgcombi !== 'undefined'"
                                            [inlineSVG]="vector.src" [onSVGLoaded]="previewSVG" id="previewbox"
                                            class="elementsedit" style="height: 30px; width: auto;">
                                        </div>
                                    </mat-expansion-panel-header>

                                    <div *ngIf="vector.src" [inlineSVG]="vector.src" [onSVGLoaded]="previewSVGBig"
                                        id="{{vector.idx}}" (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                    </div>
                                    <!-- <div *ngIf="!vector.src" [innerHTML]="element.svgcombi  | safeHtml"
                                        id="{{vector.idx}}">
                                    </div> -->
                                    <app-vectorupload *ngIf="!vector.src" [account]="Account" [option]="option"
                                        (imgurl)="setVector($event, i, idx)">
                                    </app-vectorupload>
                                    <mat-icon (click)="deleteVectorSrc(idx, element)" class="icon-label"
                                        class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                        (click)="removeVectorPathSelection()">
                                        delete
                                    </mat-icon>
                                    <mat-icon (click)="seperatePaths(idx, vector, element)" class="icon-label"
                                        class="iconsize-14" matTooltip="Seperate images parts">
                                        tab_unselected
                                    </mat-icon>
                                </mat-expansion-panel>
                                <div *ngIf="!element.morph">
                                    <div *ngIf="vector.src" [inlineSVG]="vector.src" [onSVGLoaded]="previewSVGBig"
                                        id="{{vector.idx}}" (onSVGInserted)="initVectors($event, i, idx, vector.idx)">
                                    </div>
                                    <div *ngIf="!vector.src" [innerHTML]="element.svgcombi  | safeHtml"
                                        id="{{vector.idx}}">
                                    </div>
                                    <app-vectorupload *ngIf="!vector.src && !element.svgcombi" [account]="Account"
                                        [option]="option" (imgurl)="setVector($event, i, idx)">
                                    </app-vectorupload>
                                    <mat-icon (click)="deleteVectorSrc(idx, element)" class="icon-label"
                                        class="iconsize-14" (click)="removeVectorPathMultiSelection()"
                                        (click)="removeVectorPathSelection()">
                                        delete
                                    </mat-icon>
                                    <mat-icon (click)="seperatePaths(idx, vector, element)" class="icon-label"
                                        class="iconsize-14" matTooltip="Seperate images parts">
                                        tab_unselected
                                    </mat-icon>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.posy" type="number"
                                            matInput>
                                        <mat-hint>Y |</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.posx" type="number"
                                            matInput>
                                        <mat-hint>X -</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.height" matInput>
                                        <mat-hint>Y |</mat-hint>
                                    </mat-form-field>
                                    <mat-form-field style="max-width: 46px;">
                                        <input (change)="detectchange()" [(ngModel)]="element.width" matInput>
                                        <mat-hint>X -</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <button mat-mini-fab *ngIf="element.morph" class="addbutton" matTooltip="Add vector"
                                (click)="addNewVectorSrc(i, element)" color="primary">
                                <mat-icon>add</mat-icon>
                            </button>
                        </div>
                        <!-- <div *ngIf="element.type === 'chart'">
                        <mat-accordion>
                            <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <mat-icon>show_chart</mat-icon>
                                        <mat-icon (click)="deleteitem(i)" class="iconsize-12">delete</mat-icon>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Data
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <div *ngFor="let label of element.label; let i1 = index;">
                                            <mat-form-field fxflex>
                                                <input (change)="detectchangeLabel(i, i1, label)" [(ngModel)]="label"
                                                    type="text" matInput placeholder="label">
                                            </mat-form-field>
                                        </div>
                                        <mat-icon (click)="deletelabel(i, i1)" class="iconsize-12">delete</mat-icon>
                                        <mat-icon (click)="addLabel(i, i1)">add</mat-icon>
                                        <div *ngFor="let row of element.data; let i1 = index;" fxLayout="column">

                                            <mat-form-field fxflex>
                                                <input (change)="detectchangerowlabel(i, i1, row.label)"
                                                    [(ngModel)]="row.label" type="text" matInput>
                                            </mat-form-field>
                                            <div fxFlex fxLayout="row wrap">
                                                <div *ngFor="let cell of row.data; let i2 = index;">
                                                    <mat-form-field fxflex style="width: 20px;">
                                                        <input (change)="detectchangerowcell(i, i1, i2, cell)"
                                                            [(ngModel)]="cell" type="text" matInput>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <mat-icon (click)="deletecell(i, i1)" class="iconsize-12">delete</mat-icon>
                                            <mat-icon (click)="addcell(i, i1, i2)">add</mat-icon>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Colors
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <div *ngFor="let colors of element.colors" fxLayout="column">
                                            Color Specification
                                            <input style="width: 150px;" [style.background]="colors.backgroundColor"
                                                [(colorPicker)]="colors.backgroundColor"
                                                (colorPickerChange)="detectchange()" [cpCancelButton]="true"
                                                [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[option.companyprimairycolor, option.companysecondarycolor, company.companyprimairycolor, company.companysecondarycolor]">
                                            <mat-icon class="iconsize-12" (click)="colors.backgroundColor = ''">delete
                                            </mat-icon>
                                            <input style="width: 150px;" [style.background]="colors.borderColor"
                                                [(colorPicker)]="colors.borderColor"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.companysecondarycolor]">
                                            <mat-icon class="iconsize-12" (click)="colors.borderColor = ''">delete
                                            </mat-icon>
                                            <input style="width: 150px;"
                                                [style.background]="colors.pointBackgroundColor"
                                                [(colorPicker)]="colors.pointBackgroundColor"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12" (click)="colors.pointBackgroundColor = ''">
                                                delete
                                            </mat-icon>
                                            <input style="width: 150px;" [style.background]="colors.pointBorderColor"
                                                [(colorPicker)]="colors.pointBorderColor"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12" (click)="colors.pointBorderColor = ''">delete
                                            </mat-icon>
                                        </div>

                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Chart type
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <mat-form-field>
                                            <mat-select [(value)]="element.charttype"
                                                (selectionChange)="detectchangetype(i, element.charttype)">
                                                <mat-option value="line">line</mat-option>
                                                <mat-option value="bar">bar</mat-option>
                                                <mat-option value="radar">radar</mat-option>
                                                <mat-option value="pie">pie</mat-option>
                                                <mat-option value="polarArea">Polararea</mat-option>
                                                <mat-option value="doughnut">Doughnut</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <div fxLayout="column">
                                            X-Axe
                                            Gridline color
                                            <input
                                                [style.background]="element.lineChartOptions.scales.xAxes[0].gridLines.color"
                                                [(colorPicker)]="element.lineChartOptions.scales.xAxes[0].gridLines.color"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12"
                                                (click)="element.lineChartOptions.scales.xAxes[0].gridLines.color = ''">
                                                delete
                                            </mat-icon>
                                            X-Axe
                                            Font color
                                            <input
                                                [style.background]="element.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                                [(colorPicker)]="element.lineChartOptions.scales.xAxes[0].ticks.fontColor"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12"
                                                (click)="element.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                                delete
                                            </mat-icon>
                                            Y-axe
                                            Gridline color
                                            <input
                                                [style.background]="element.lineChartOptions.scales.yAxes[0].gridLines.color"
                                                [(colorPicker)]="element.lineChartOptions.scales.yAxes[0].gridLines.color"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12"
                                                (click)="element.lineChartOptions.scales.yAxes[0].gridLines.color = ''">
                                                delete
                                            </mat-icon>
                                            Y-axe
                                            Font color
                                            <input
                                                [style.background]="element.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                                [(colorPicker)]="element.lineChartOptions.scales.yAxes[0].ticks.fontColor"
                                                (colorPickerChange)="detectchange()" [cpPresetLabel]="'Company colors'"
                                                [cpPresetColors]="[company.companyprimairycolor, company.secondarycolor]">
                                            <mat-icon class="iconsize-12"
                                                (click)="element.lineChartOptions.scales.xAxes[0].ticks.fontColor = ''">
                                                delete
                                            </mat-icon>
                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-icon (click)="addgraph(i)">add</mat-icon>
                                <mat-icon (click)="deletegraph(i)">delete</mat-icon>
                            </mat-expansion-panel>
                        </mat-accordion>
                    </div> -->
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div fxLayout="row wrap" fxLayout.xs="column">
                <button mat-mini-fab class="addbutton" matTooltip="Add element" (click)="addNewImage()" color="primary">
                    <mat-icon>image</mat-icon>
                </button>
                <button mat-mini-fab class="addbutton" matTooltip="Add text" (click)="addNewText()" color="primary">
                    <mat-icon>text_format</mat-icon>
                </button>
                <button mat-mini-fab class="addbutton" matTooltip="Add shape" (click)="addNewShape()" color="primary">
                    <mat-icon>format_shapes</mat-icon>
                </button>
                <button mat-mini-fab class="addbutton" matTooltip="Add animated image" (click)="addNewVector()"
                    color="primary">
                    <mat-icon>wallpaper</mat-icon>
                </button>
                <button mat-mini-fab class="addbutton" matTooltip="Add drawing" (click)="addNewWhiteboard()"
                    color="primary">
                    <mat-icon>edit</mat-icon>
                </button>
                <!-- <button mat-mini-fab class="addbutton" matTooltip="Add Chart" (click)="addNewChart()" color="primary">
                    <mat-icon>show_chart</mat-icon>
                </button> -->
            </div>
        </div>
    </div>

    <div ngClass.gt-xs="container-normal" ngClass.lt-sm="container-noshow" [class.container-xs-show]="listviewxsshow"
        fxLayout="row" fxLayoutAlign="start">

        <div *ngIf="changevideo" [ngStyle]="canvas" style="border: 1px solid grey; overflow:hidden;">


            <div *ngIf="selectedVecPath && selectedelement.type === 'vector'" fxLayout="row" class="vectorcontrols">
                <mat-icon (click)="deleteSelectedVectorPath()" class="iconsize-18" matTooltip="Delete section">
                    delete</mat-icon>
                <mat-icon (click)="deleteWhitespaceSVG()" class="icon-label" class="iconsize-18"
                    matTooltip="delete whitespace">
                    check_box_outline_blank
                </mat-icon>
                <mat-icon (click)="saveAsSeperateVector()" class="iconsize-18" matTooltip="Create seperate section">
                    image</mat-icon>
                <mat-icon (click)="saveAsNewVector()" class="icon-label" class="iconsize-18"
                    matTooltip="save to file as new image">
                    save
                </mat-icon>
                <mat-icon (click)="removeVectorPathMultiSelection()" (click)="removeVectorPathSelection()"
                    class="icon-label" class="iconsize-18" matTooltip="Remove selection">
                    indeterminate_check_box
                </mat-icon>
                <mat-checkbox [(ngModel)]="selectmultiplepaths" matTooltip="selected multiple sections"
                    (change)="selectMultiplePaths()"></mat-checkbox>
            </div>


            <video *ngIf="canvas.videourl" preload="auto" class="video-background" no-controls [src]="canvas.videourl"
                #videoPlayer>
            </video>

            <div *ngIf="canvas.videourl === ''" class="image-background"
                [style.background-image]="canvas['background-image']"></div>

            <!-- <svg id="motionPath" viewBox="-20 0 557 190" class="path-edit">
                <path id="path"
                    d="M9,100c0,0,18.53-41.58,49.91-65.11c30-22.5,65.81-24.88,77.39-24.88c33.87,0,57.55,11.71,77.05,28.47c23.09,19.85,40.33,46.79,61.71,69.77c24.09,25.89,53.44,46.75,102.37,46.75c22.23,0,40.62-2.83,55.84-7.43c27.97-8.45,44.21-22.88,54.78-36.7c14.35-18.75,16.43-36.37,16.43-36.37" />
            [ngClass]="{'path-edit-now':editpath}"
               [style.width]="canvas.width" [style.height]="canvas.height" 
                </svg> -->


            <div style="height: 100%; width: 100%; position: absolute; z-index: 100; pointer-events: none;"
                id="weathercontainer"></div>


            <div *ngIf="animationarray.length > 0 && changenow" #myBounds id="myBounds"
                [style.background-image]="canvas['background-image']"
                style="overflow: hidden; background-color: transparent;">
                <div *ngFor="let element of animationarray; let i = index" (click)="onSelectElement(element)"
                    style="background-color: transparent; overflow: hidden;">

                    <div *ngIf="element.motionpath" class="path-edit" [innerHTML]="element.motionpath | safeHtml"
                        [style.width]="canvas.width" [style.height]="canvas.height"
                        [ngStyle]="{'z-index':editpath === true && element === selectedelement ? 1000 : -1 }"></div>

                    <div *ngIf="element.type === 'image'" id="{{element.id}}" [attr.id]="element.id"
                        style="overflow: hidden;" ngDraggable [ngStyle]="element.style"
                        [style.width]="element.style.width" [style.height]="element.style.height"
                        (movingOffset)="onMoving($event, i)" [preventDefaultEvent]="true"
                        [style.transform]="'translate(' + element.posx + 'px, ' + element.posy +'px)'"
                        (rzResizing)="onResizing($event, i)" ngResizable [rzAspectRatio]="true">
                        <img *ngIf="element.src" style="width: 100%; height: 100%;" src={{element.src}}>
                    </div>
                    <label ngResizable *ngIf="element.type === 'text'" id="{{element.id}}" [attr.id]="element.id"
                        ngDraggable style="overflow: hidden;" (movingOffset)="onMoving($event, i)"
                        [style.transform]="'translate(' + element.posx + 'px, ' + element.posy +'px)'"
                        (rzResizing)="onResizing($event, i)" [ngStyle]="element.style"
                        [rzAspectRatio]="false">{{element.content}}</label>
                    <div *ngIf="element.type === 'shape'" id="{{element.id}}" style="overflow: hidden;" ngDraggable
                        [style.width]="element.style.width" [style.height]="element.style.height"
                        (movingOffset)="onMoving($event, i)" [preventDefaultEvent]="true"
                        [style.transform]="'translate(' + element.posx + 'px, ' + element.posy +'px)'"
                        (rzResizing)="onResizing($event, i)" ngResizable [rzAspectRatio]="element.shape === 'heart'"
                        [ngStyle]="element.style" [className]="element.style.class">
                    </div>
                    <div *ngIf="element.type === 'vector'" style="overflow: hidden;" [style.width]="element.style.width"
                        [style.height]="element.style.height" ngDraggable [ngStyle]="element.style"
                        (movingOffset)="onMoving($event, i)" [preventDefaultEvent]="true"
                        [style.transform]="'translate(' + element.posx + 'px, ' + element.posy +'px)'"
                        (rzResizing)="onResizing($event, i)" ngResizable [rzAspectRatio]="false" id="{{element.id}}">
                        <div style="height: 100%; width: 100%;" [innerHTML]="element.svgcombi  | safeHtml"
                            (click)="clickVectorPaths($event)">
                        </div>
                    </div>
                    <canvas-whiteboard *ngIf="whiteboard === true" id="{{element.id}}" #canvasWhiteboard
                        [drawButtonClass]="'drawButtonClass'" [drawButtonText]="'Draw'" [ngStyle]="element.style"
                        [clearButtonClass]="'clearButtonClass'" [clearButtonText]="'Clear'" [undoButtonText]="'Undo'"
                        [undoButtonEnabled]="true" [redoButtonText]="'Redo'" [redoButtonEnabled]="true"
                        [colorPickerEnabled]="true" [saveDataButtonEnabled]="true" [saveDataButtonText]="'Save'"
                        [lineWidth]="2" [strokeColor]="'rgb(0,0,0)'" [shouldDownloadDrawing]="false"
                        (onSave)="onCanvasSave($event, i)">
                    </canvas-whiteboard>

                </div>
            </div>
        </div>
    </div>
</div>