<div fxLayout="column" fxLayoutWrap="wrap" fxLayoutAlign="space-around">
  <div fxFlex="100%" fxLayout="column" class="topbanner">
        <div class="selectrelation" fxFlex fxShow.xs="false" fxLayout="row">
            <mat-chip-list *ngIf="option"style="margin: 10px">
                <mat-chip color="primary" class="mat-h4">{{ option.relationname }}</mat-chip>
              </mat-chip-list>
          <mat-form-field style="width: 50%">
            <input type="text" placeholder="Select Relation" aria-label="relation" matInput
              (keyup)="searchGoQuick($event.srcElement.value)" [matAutocomplete]="relations">
            <mat-autocomplete #relations="matAutocomplete" [displayWith]="displayFnRelation">
              <mat-option *ngFor="let option of filteredRelations; let i = index" [value]="option"
                (blur)="onSelectRelation(option, i)">
                {{ option.relationname }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
  </div>


  <!-- Publications_______________________________ -->

  <mat-tab-group fxLayout="column" fxLayoutWrap="wrap" fxFlexAlign="start" class="relations"
    [selectedIndex]="selectedIndex">
    <mat-tab fxFlex="100%" label="New Publications" class="relations">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>text_format</mat-icon>
        <div fxShow.xs="false">Publications</div>
      </ng-template>

      <app-marketingpublications [Account]="Account" [SelectedRelation]="option" [option]="option">
      </app-marketingpublications>


    </mat-tab>



    <!-- Mailing tab _____________________________ -->

    <mat-tab class="tabmenu" label="Mailing" fxFlex="100%" fxFlexAlign="start" label="New Publications">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>email</mat-icon>
        <div fxShow.xs="false">Mailing/Newsletters</div>
      </ng-template>

      <div class="tabcontainer" fxLayout="column">
        <mat-button-toggle-group #group="matButtonToggleGroup" style="width: 300px; margin-top: 10px;" fxFlex="3 3 40px" fxFlexAlign="start"
          [vertical]="false" fxflex>
          <mat-button-toggle style="width: 25%" matTooltip="Campaigns" value="campaign" (click)="getMailingCampaign()">
            <mat-icon>today</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Mailing List" value="maillist">
            <mat-icon>list</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Templates" value="mailing" (click)="getMailing()">
            <mat-icon>rate_review</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Templates Editor" value="maileditor">
            <mat-icon>edit</mat-icon>
          </mat-button-toggle>
        </mat-button-toggle-group>

        <div fxLayout="column" style="width: 100%;" fxFlex (swipeleft)="swipeleft($event)"
          (swiperight)="swiperight($event)">
          <div fxFlexOffset="10px" fxLayout="row" class="bottomlist" *ngIf="group.value == 'mailing'">

            <div class="addtobutton">
              <button mat-fab color="primary" matTooltip="Upload to or create Multiple Lists" (click)="createMailing()">
                <mat-icon>add</mat-icon>
              </button>
            </div>

            <div class="card-left-menu" fxLayout="column" ngClass.gt-xs="listview-normal"
              ngClass.lt-sm="listview-noshow" [class.listview-xs-show]="listviewxsshow">
              <button a mat-raised-button color="primary" (click)="searchGoMailing(searchTerm.value)">
                <mat-icon>search</mat-icon>Search Result
              </button>

              <button a mat-raised-button (click)="getMailing()">
                Show All
              </button>
              <div class="listview">

                <div *ngFor="let Mailing of Mailing" (click)="onSelectMailing(Mailing)"
                  [class.selected]="Mailing === selectedMailing">
                  <div  class="boxmailing">
                    <div >
                      <div fxLayout="row" fxLayout.xs="column" style="height: 30px; vertical-align: middle;">
                        <div fxFlexclass="selectionboxmailing">
                          <div [class.sendtrue]="Mailing.send === true" [class.sendfalse]="Mailing.send === false">
                          </div>
                        </div>
                        <div fxFlex *ngIf="Mailing.mailinglist">
                          {{ Mailing.title | slice: 0:30 }}
                        </div>
                      </div>
                      <div fxLayout="row" fxLayout.xs="column" style="height: 30px; vertical-align: middle;">
                        <div fxFlexcolspan="3" class="selectionboxmailing80">
                          {{ Mailing.date | date }}
                        </div>
                        <div fxFlex *ngIf="Mailing.scheduled" class="selectionboxmailing">
                          <mat-icon>schedule</mat-icon>
                        </div>
                      </div>
                    </div >
                  </div >
                </div>
              </div>
            </div>


            <mat-card ngClass.gt-xs="container-normal" ngClass.lt-sm="container-noshow"
              [class.container-xs-show]="listviewxsshow" *ngIf="selectedMailing && group.value == 'mailing'">
              <mat-card-content>
                <div  class="mailingform">
                  <div fxLayout="row" fxLayout.xs="column">
                    
                      <mat-toolbar class="titlebox">
                        <h2>
                          {{
                              selectedMailing.subject | uppercase | slice: 0:30
                            }}
                        </h2>

                        <mat-menu #menucall="matMenu">
                          <button mat-menu-item (click)="openDialogDeleteMailing()">
                            <mat-icon>delete</mat-icon>
                            Delete
                          </button>
                          <button mat-menu-item (click)="createMailing()">
                            <mat-icon>note_add</mat-icon>
                            New
                          </button>
                          <button mat-menu-item (click)="randomizeMailing()">
                            <mat-icon>merge_type</mat-icon>
                            Add to campaign
                          </button>
                          <button *ngIf="!this.selectedMailing.templatearray" mat-menu-item (click)="editMailing()"
                            disabled>
                            <mat-icon>edit</mat-icon>
                            Edit in Maileditor
                          </button>
                          <button (click)="group.value = 'maileditor'" *ngIf="this.selectedMailing.templatearray"
                            mat-menu-item (click)="editMailing()">
                            <mat-icon>edit</mat-icon>
                            Edit in Maileditor
                          </button>
                        </mat-menu>
                        
                        <button mat-icon-button [matMenuTriggerFor]="menucall" class="menu">
                          <mat-icon>more_vert</mat-icon>
                        </button>
                      </mat-toolbar>
                    
                  </div>

                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-form-field class="form-full-width">
                        <input matInput [(ngModel)]="selectedMailing.subject" placeholder="Subject"
                          class="InputField" />
                      </mat-form-field>
                    </div>
                    <div fxFlex>
                      <mat-form-field class="form-full-width">
                        <input matInput [(ngModel)]="selectedMailing.title" placeholder="Custom Titel/ID"
                          class="InputField" />
                      </mat-form-field>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-chip-list #chipList>
                        <mat-chip color="primary" *ngFor="let item of selectedItems; let i = index">
                          {{ item }}
                          <mat-icon matChipRemove (click)="onRemoveItemsMailing(item, i)">cancel</mat-icon>
                        </mat-chip>
                        <!-- [(mailingaddresscampaign)] -->
                        <input matInput (keydown.enter)="onAddItemManual($event)"
                          placeholder="Type and Select mailinglist" [matChipInputFor]="chipList"
                          [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true"
                          [matAutocomplete]="maillists" [formControl]="addItems" #chipInput />
                        <mat-autocomplete #maillists="matAutocomplete" (optionSelected)="onAddItemsMailing($event)">
                          <mat-option *ngFor="
                                let mailingaddress of filteredItems | async
                              " [value]="mailingaddress">
                            <div >{{ mailingaddress.listname }} |
                              {{ mailingaddresscampaign.industry }}</div >
                          </mat-option>
                        </mat-autocomplete>
                      </mat-chip-list>
                    </div>
                    <div fxFlex>
                      <mat-form-field class="form-full-width">
                        <input matInput [(ngModel)]="selectedMailing.from" placeholder="from@email.com"
                          class="InputField" />
                      </mat-form-field>
                    </div>
                  </div>
                </div >

                <br />
                <a href="https://www.mail-tester.com" target="_blank">Check spam rating</a>
                <br />

                <mat-expansion-panel class="max-expansion-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title class="mat-expansion-panel-header-title">
                      Schedule Mailing
                    </mat-panel-title>
                    <mat-panel-description>
                      Schedule when your mail should be send
                      <mat-icon>schedule</mat-icon>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <div  class="max-div -content">
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailing.time" placeholder="Time" class="InputField"
                            type="time" />
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Timezone" [(ngModel)]="selectedMailing.timezone">
                            <mat-option *ngFor="let timezone of timezones" [value]="timezone.value">
                              {{ timezone.value }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-datepicker #picker2 class="form-half-width"></mat-datepicker>
                        <input [min]="minDate" [max]="maxDate" [matDatepicker]="myDatepicker2"
                          [(ngModel)]="selectedMailing.date" placeholder="Send Date" />
                        <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
                        <mat-datepicker #myDatepicker2></mat-datepicker>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <button a mat-raised-button (click)="openDialogScheduleMailing()">
                        Schedule
                        <mat-icon>schedule</mat-icon>
                      </button>
                    </div>
                  </div >
                </mat-expansion-panel>
                <div 
                  style="background-color: whitesmoke; margin: 20px 2px 20px 20px; padding:20px 2px 20px 20px; width: 90%">
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-select placeholder="Copy from:" [(value)]="copyfrommailing">
                        <mat-option *ngFor="let Mailing of Mailing; let i = index" [value]="Mailing">
                          {{ Mailing.subject }} {{ Mailing.date }}
                        </mat-option>
                      </mat-select>
                    </div>
                    <div fxFlex>
                      <button a mat-raised-button (click)="copyFromMailing()">
                        Copy
                        <mat-icon>copy</mat-icon>
                      </button>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <button *ngIf="!selectedMailing.templatearray" a mat-raised-button (click)="addTextMailing()">
                        Add/Edit text mailing
                        <mat-icon>edit</mat-icon>
                      </button>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <mat-accordion>
                      <mat-expansion-panel>
                        <mat-expansion-panel-header>
                          <mat-panel-title>
                            Dynamic input
                          </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div fxLayout="column" style="width: 200px;"
                          matTooltip="Click to copy, insert in text to retreive mailinglist information">
                          <label (mouseenter)="$event.stopImmediatePropagation()"
                            (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"  #tooltip="matTooltip"
                            (click)="tooltip.toggle()"
                            (click)="copyMessage('%recipient_name%')">%recipient_name%</label>
                          <label (mouseenter)="$event.stopImmediatePropagation()"
                            (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!" #tooltip="matTooltip"
                            (click)="tooltip.toggle()"
                            (click)="copyMessage('%recipient.company%')">%recipient.company%</label>
                          <label (mouseenter)="$event.stopImmediatePropagation()"
                            (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!" #tooltip="matTooltip"
                            (click)="tooltip.toggle()" (click)="copyMessage('%recipient%')">%recipient%</label>
                          <label (mouseenter)="$event.stopImmediatePropagation()"
                            (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!" #tooltip="matTooltip"
                            (click)="tooltip.toggle()"
                            (click)="copyMessage('%recipient.firstname%')">%recipient.firstname%</label>
                          <label (mouseenter)="$event.stopImmediatePropagation()"
                            (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!" #tooltip="matTooltip"
                            (click)="tooltip.toggle()"
                            (click)="copyMessage('%recipient.lastname%')">%recipient.lastname%</label>
                        </div>
                      </mat-expansion-panel>
                    </mat-accordion>

                  </div>
                </div >
                <!-- uploadUrl: 'http://localhost:3000/api/Containers/5af0573e196178122c6bb4a4/upload/', -->
                <!-- <div *ngIf="selectedMailing.done == true">
                    <ckeditor #content [name]="editor1" [(ngModel)]="selectedMailing.html" [config]="{
                  extraPlugins: 'filebrowser,popup,filetools',
                  toolbarCanCollapse: 'true',
                  width: '100%',
                  height: '600px',
                  toolbarStartupExpanded: 'false'}" (fileUploadResponse)="onRequestCkEvent($event)" debounce="500">
                    </ckeditor>

                  </div> -->

                <!-- <div  *ngIf="selectedMailing.done == true" class="max-div -content">
                    <div fxLayout="row" fxLayout.xs="column"  rowspan="10">
                      <div fxFlexcolspan="3">

                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlexcolspan="3">
                        <label (click)="toggleTextView()">show plain text</label>
                      </div>

                    </div>
                    <div fxLayout="row" fxLayout.xs="column"  *ngIf="toggletextview" rowspan="10">
                      <div fxFlexcolspan="3">
                        <mat-form-field class="content-form">
                          <textarea matInput class="content-form" #content [(ngModel)]="selectedMailing.text"
                            placeholder="content">Text Version</textarea>
                          <mat-hint align="end">{{content.value.length}}</mat-hint>
                        </mat-form-field>
                      </div>
                    </div>
                  </div > -->
                <br />
                <mat-checkbox [(ngModel)]="selectedMailing.send">
                  Send
                </mat-checkbox>
                <button a mat-raised-button (click)="saveMailing('save')">
                  Save
                  <mat-icon>save</mat-icon>
                </button>
                <button a mat-raised-button (click)="sendMailing()">
                  Send
                  <mat-icon>send</mat-icon>
                </button>
                <button a mat-raised-button (click)="showTemplatePreview()">
                  Preview
                  <mat-icon>view</mat-icon>
                </button>

                <br />

                <div *ngIf="selectedMailing.send">
                  <div  style="margin: 20px 0px 40px 0px" class="max-div -content">
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around">
                      <div fxFlexstyle="width: 25%;">
                        <label>Opened </label>
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        <label>Clicked </label>
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        <label>Bounced</label>
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        <label>Unsubscribed</label>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around">
                      <div fxFlexstyle="width: 25%;">
                        {{ selectedMailing.totalopened }}
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        {{ selectedMailing.totalclicked }}
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        {{ selectedMailing.totalbounced }}
                      </div>
                      <div fxFlexstyle="width: 25%;">
                        {{ selectedMailing.totalunsubscribed }}
                      </div>
                    </div>
                  </div >

                  <mat-expansion-panel class="max-expansion-panel">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        Website Statistics
                      </mat-panel-title>
                      <mat-panel-description>
                        Select your account to get Mailings website behavior
                        <mat-icon>insert_chart</mat-icon>
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <div  class="max-div -content">
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlex>
                          <mat-form-field class="form-full-width">
                            <mat-select [(ngModel)]="selectedanalytics" placeholder="GA Account" class="InputField">
                              <mat-option *ngFor="
                                    let selectedanalytics of Googleanalytics
                                  " [value]="selectedanalytics">
                                {{ selectedanalytics.name }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div fxFlex></div>
                        <div fxFlex>
                          <button a mat-raised-button (click)="getAnalytics()">
                            Get Statistics
                            <mat-icon>insert_chart</mat-icon>
                          </button>
                        </div>
                      </div>
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlex>
                          <label>Average Time on Website</label>
                        </div>
                        <label>Average Bounce Rate</label>
                        <div fxFlex>
                          <label>Completed Goals</label>
                        </div>
                        <div fxFlex>
                          <label>Page Views</label>
                        </div>
                      </div>
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlex>{{ avgTimeOnPage | slice: 0:4 }} seconds</div>
                        {{
                            bounceRate | slice: 0:4
                          }}
                        %
                        <div fxFlex>{{ goalStartsAll }} goals</div>
                        <div fxFlex>{{ pageview | slice: 0:4 }} views</div>
                      </div>
                    </div >
                  </mat-expansion-panel>
                </div>
              </mat-card-content>
            </mat-card>

          </div>

          <div fxLayout="row" fxFlexOffset="10px" class="bottomlist" *ngIf="group.value == 'campaign'">

            <div class="addtobutton">
              <button mat-fab color="primary" matTooltip="Add Campaign" (click)="createMarketingPlannerevents()">
                <mat-icon>add</mat-icon>
              </button>
              <button mat-mini-fab color="primary" matTooltip="Delete Campaign"
                (click)="openDialogDeleteMailingCampaign()">
                <mat-icon>delete</mat-icon>
              </button>
            </div>

            <div class="card-left-menu" fxLayout="column" ngClass.gt-xs="listview-normal"
              ngClass.lt-sm="listview-noshow" [class.listview-xs-show]="listviewxsshow">
              <mat-form-field>
                <input matInput [(ngModel)]="searchboxCampaign" (keyup.enter)="searchGoCampaign()" placeholder="Name" />
              </mat-form-field>
              <button a mat-raised-button color="primary" (click)="searchGoCampaign()">
                <mat-icon>search</mat-icon>Search
              </button>

              <button a mat-raised-button (click)="getMailingCampaign()">
                Show All
              </button>
              <div class="listview" fxLayout="column">

                <div *ngFor="let Marketingplannerevents of Marketingplannerevents" (click)="
                    onSelectMarketingplannerevents(Marketingplannerevents)
                  " [class.selected]="
                    Marketingplannerevents === selectedMarketingplannerevents
                  ">
                  <div class="box">
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlexstyle="width: 80px">
                        <mat-icon *ngIf="Marketingplannerevents.countsend > 0"
                          matBadge="{{ Marketingplannerevents.countsend }}" matBadgeColor="primary"
                          matBadgePosition="below after">mail</mat-icon>
                        <mat-icon *ngIf="Marketingplannerevents.countsend === 0">mail</mat-icon>
                        &nbsp;
                        <mat-icon *ngIf="Marketingplannerevents.countnotsend > 0"
                          matBadge="{{ Marketingplannerevents.countnotsend }}" matBadgeColor="primary"
                          matBadgePosition="below after">markunread_mailbox</mat-icon>
                        <mat-icon *ngIf="Marketingplannerevents.countnotsend === 0">markunread_mailbox</mat-icon>
                      </div>
                      <div fxFlexstyle="font-size: 8pt;">
                        {{ Marketingplannerevents.name | slice: 0:26 }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>


            </div>

            <!-- Mailing Campaign  -->

            <mat-card ngClass.gt-xs="container-normal" ngClass.lt-sm="container-noshow"
              [class.container-xs-show]="listviewxsshow" *ngIf="
              selectedMarketingplannerevents && group.value == 'campaign'">
              <mat-card-content>
                <div class="form-full-width">
                  <div fxLayout="row" fxLayout.xs="column">
                  
                      <mat-toolbar class="titlebox">
                        <h2>
                          {{
                              selectedMarketingplannerevents.name
                                | uppercase
                                | slice: 0:30
                            }}
                        </h2>
                        <button mat-icon-button [matMenuTriggerFor]="menucall" class="menu">
                          <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menucall="matMenu">
                          <button mat-menu-item (click)="openDialogDeleteMarketingplannerevents()">
                            <mat-icon>delete</mat-icon>
                            <div >Delete</div >
                          </button>
                          <button mat-menu-item (click)="createMarketingplannerevents()">
                            <mat-icon>note_add</mat-icon>
                            <div >New</div >
                          </button>
                        </mat-menu>
                      </mat-toolbar>
                    
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-form-field class="form-full-width">
                        <input matInput [(ngModel)]="selectedMarketingplannerevents.name" placeholder="Name"
                          class="InputField" />
                      </mat-form-field>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-chip-list #chipList>
                        <mat-chip color="primary" *ngFor="let item of selectedItems; let i = index">
                          {{ item }}
                          <mat-icon matChipRemove (click)="onRemoveItems(item, i)">cancel</mat-icon>
                        </mat-chip>
                        <!-- [(mailingaddresscampaign)] -->
                        <input matInput placeholder="Type and Select mailinglist" [matChipInputFor]="chipList"
                          [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true"
                          [matAutocomplete]="maillists" [formControl]="addItems" #chipInput />
                        <mat-autocomplete #maillists="matAutocomplete" (optionSelected)="onAddItems($event); (i)">
                          <mat-option *ngFor="
                                let mailingaddresscampaign of filteredItems
                                  | async
                              " [value]="mailingaddresscampaign">
                            <div >{{ mailingaddresscampaign.listname }} |
                              {{ mailingaddresscampaign.industry }}</div >
                          </mat-option>
                        </mat-autocomplete>
                      </mat-chip-list>
                    </div>
                    <div fxFlex>
                      <button a mat-raised-button (click)="saveMailingCampaign()">
                        Save as Draft
                        <mat-icon>save</mat-icon>
                      </button>
                      <button a mat-raised-button (click)="openDialogDeleteMailingCampaign()">
                        Delete
                        <mat-icon>remove</mat-icon>
                      </button>
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      <mat-form-field style="width: 200px">
                        <mat-select placeholder="select" [(ngModel)]="filtermailingselect"
                          (selectionChange)="getMailingCampaignMailings()">
                          <mat-option *ngFor="let filtermailingselect of filtermailing" [value]="filtermailingselect">
                            {{ filtermailingselect }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div fxFlex>
                      <mat-form-field class="form-full-width">
                        <textarea matInput matTextareaAutosize="true" matAutosizeMinRows="6"
                          [(ngModel)]="selectedMarketingplannerevents.notes" placeholder="Notes"
                          class="InputField"></textarea>
                      </mat-form-field>
                    </div>
                  </div>
                </div>

                <br />
                <div (blur)="saveMailingCampaign()">
                  <div *ngFor="
                        let CampaignMailing of CampaignMailing;
                        let i = index
                      ">
                    <a mat-mini-fab color="primary" *ngIf="toggleCampaignMailing[i] === false"
                      (click)="toggleCampaignMailingNow(i)" matTooltip="Expand Panel" [ngClass]="
                          togglecampaignclasstrans[i] === true
                            ? 'toggelcampaignwindowfade'
                            : 'toggelcampaignwindow'
                        ">
                      <mat-icon>aspect_ratio</mat-icon>
                    </a>
                    <mat-card *ngIf="toggleCampaignMailing[i] == false" [ngClass]="
                          togglecampaignclasstrans[i] == true
                            ? 'toggelcampaignwindowactive'
                            : 'quickcampaignmailing'
                        " [class.campmailingnotsend]="
                          CampaignMailing.scheduled &&
                          CampaignMailing.send === false
                        " [class.campmailingdone]="
                          CampaignMailing.scheduled &&
                          CampaignMailing.send === true
                        ">
                      <mat-card-content>
                        <div class="smalloverviewmailingcampaign">
                          <div fxLayout="row" fxLayout.xs="column">
                            <div fxFlexstyle="width: 10%">
                              <mat-icon *ngIf="
                                    CampaignMailing.scheduled &&
                                    CampaignMailing.send === false
                                  ">schedule
                              </mat-icon>
                              <mat-icon *ngIf="CampaignMailing.done === true">done_all</mat-icon>
                              <mat-icon *ngIf="
                                    CampaignMailing.scheduled === false &&
                                    CampaignMailing.send === false
                                  ">
                                build</mat-icon>
                            </div>
                            <div fxFlex>
                              <label>Subject: {{ CampaignMailing.subject }}</label>
                            </div>
                          </div>
                          <div fxLayout="row" fxLayout.xs="column">
                            <div fxFlexstyle="width: 10%"></div>
                            <div fxFlex>
                              <label style="font-size: 8pt">Title: {{ CampaignMailing.title }}</label>
                            </div>
                          </div>
                          <div fxLayout="row" fxLayout.xs="column">
                            <div fxFlexstyle="width: 10%"></div>
                            <div fxFlex>
                              <label style="font-size: 8pt">Date: {{ CampaignMailing.date | date }},
                                {{ CampaignMailing.time }}</label>
                            </div>
                          </div>
                        </div>
                      </mat-card-content>
                    </mat-card>

                    <mat-card *ngIf="toggleCampaignMailing[i]">
                      <mat-card-content>
                        <div *ngIf="CampaignMailing.send == false">
                          <div class="max-div -content">
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                <mat-select placeholder="Copy from:" [(value)]="copyfrommailing"
                                  [attr.disabled]="CampaignMailing.send">
                                  <mat-option *ngFor="let Mailing of Mailing" [value]="Mailing">
                                    {{ Mailing.title }}
                                    {{ Mailing.date | date: "mediumDate" }}
                                  </mat-option>
                                </mat-select>
                              </div>
                              <div fxFlex>
                                <button a mat-raised-button (click)="copyFromMailingCampaign(i)">
                                  Copy
                                  <mat-icon>copy</mat-icon>
                                </button>
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlexcolspan="3">
                                <mat-form-field class="form-full-width">
                                  <input matInput [(ngModel)]="CampaignMailing.subject" placeholder="Subject"
                                    class="InputField" [attr.disabled]="CampaignMailing.send" />
                                </mat-form-field>
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                <mat-form-field class="form-full-width">
                                  <input matInput [(ngModel)]="CampaignMailing.title" placeholder="Custom Titel/ID"
                                    class="InputField" [attr.disabled]="CampaignMailing.send" />
                                </mat-form-field>
                              </div>
                              <div fxFlexcolspan="2">
                                <mat-form-field class="form-full-width">
                                  <input matInput [(ngModel)]="CampaignMailing.from" placeholder="from@email.com"
                                    class="InputField" [attr.disabled]="CampaignMailing.send" />
                                </mat-form-field>
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                <mat-checkbox [(ngModel)]="CampaignMailing.send" [attr.disabled]="CampaignMailing.send">
                                  Send
                                </mat-checkbox>
                              </div>
                              <div fxFlex>
                                <mat-checkbox [(ngModel)]="CampaignMailing.toopened">
                                  Send to Previous Openend Only
                                </mat-checkbox>
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                <mat-checkbox [(ngModel)]="CampaignMailing.done">
                                  Done
                                </mat-checkbox>
                              </div>
                              <div fxFlex>
                                <mat-checkbox [(ngModel)]="CampaignMailing.toclicked">
                                  Send to Previous Clicked Only
                                </mat-checkbox>
                              </div>
                            </div>
                          </div>

                          <br />

                          <mat-expansion-panel class="max-expansion-panel">
                            <mat-expansion-panel-header>
                              <mat-panel-title class="mat-expansion-panel-header-title">
                                Schedule Mailing
                              </mat-panel-title>
                              <mat-panel-description>
                                Schedule when your mail should be send
                                <mat-icon>schedule</mat-icon>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div class="max-div -content">
                              <div fxLayout="row" fxLayout.xs="column">
                                <div fxFlex>
                                  <mat-form-field>
                                    <input matInput [(ngModel)]="CampaignMailing.time" placeholder="Time"
                                      class="InputField" type="time" [attr.disabled]="CampaignMailing.send" />
                                  </mat-form-field>
                                </div>
                                <div fxFlex>
                                  <mat-form-field>
                                    <mat-select placeholder="Timezone" [(ngModel)]="CampaignMailing.timezone"
                                      [attr.disabled]="CampaignMailing.send">
                                      <mat-option *ngFor="let timezone of timezones" [value]="timezone.value">
                                        {{ timezone.value }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div fxFlex>
                                  <mat-datepicker #picker2 class="form-half-width"></mat-datepicker>
                                  <input [matDatepicker]="myDatepicker2" [(ngModel)]="CampaignMailing.date"
                                    placeholder="Send Date" [attr.disabled]="CampaignMailing.send" />
                                  <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
                                  <mat-datepicker #myDatepicker2></mat-datepicker>
                                </div>
                              </div>
                            </div>
                          </mat-expansion-panel>
                          <br />
                          <!-- <div >
                              <div fxLayout="row" fxLayout.xs="column"  *ngIf="CampaignMailing.done == false">
                                <label style="font-size: 8pt">%recipient_name%, %recipient.company%, %recipient%,
                                  %recipient.firstname%, %recipient.lastname%</label>
                              </div>
                            </div > -->

                          <!-- <div *ngIf="CampaignMailing.done == false">
                              <ckeditor #content [name]="editor2" [(ngModel)]="CampaignMailing.html" [config]="{
                        extraPlugins: 'filebrowser,popup,filetools',
                          toolbarCanCollapse: 'true',
                          width: '100%',
                          height: '600px',
                          toolbarStartupExpanded: 'false'}" (fileUploadResponse)="onRequestCkEvent($event)"
                                debounce="500">
                              </ckeditor>
                            </div> -->

                          <div  style="width: 100%;">
                            <div fxLayout="row" fxLayout.xs="column" *ngIf="CampaignMailing.done == false" rowspan="10"
                              style="width: 100%;">
                              <div fxFlexcolspan="3"></div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <button a mat-raised-button (click)="showMailPreview(i)">
                                Preview
                                <mat-icon>view</mat-icon>
                              </button>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <label (click)="toggleTextView()">show plain text</label>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column" *ngIf="
                                  CampaignMailing.done == false &&
                                  toggletextview
                                " rowspan="10">
                              <div fxFlexcolspan="3">
                                <mat-form-field class="form-full-width">
                                  <textarea matInput class="content-form" #content [(ngModel)]="CampaignMailing.text"
                                    placeholder="content">
Text Version</textarea>
                                  <mat-hint align="end">{{
                                      content.value.length
                                    }}</mat-hint>
                                </mat-form-field>
                              </div>
                            </div>
                          </div >
                        </div>

                        <!--  -->

                        <div *ngIf="CampaignMailing.send">
                          <div  class="max-div -content">
                            <div fxLayout="row" fxLayout.xs="column" *ngIf="toggleshorttext[i]">
                              <div fxFlexcolSpan="4">
                                <br />
                                <!-- <div class="mailpreview">{{ CampaignMailing.text | slice:0:300 }}</div> -->
                                <br />
                                <label (click)="toggleToFullText(i)">Show Message</label>
                                <br />
                              </div>
                            </div>

                            <div fxLayout="row" fxLayout.xs="column" *ngIf="toggleshorttext[i] === false">
                              <div fxFlexcolSpan="4">
                                <br />
                                <div class="mailpreview" [innerHTML]="htmlpreview[i]"></div>
                                <br />
                                <label (click)="toggleToFullText(i)">hide</label>
                                <br />
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                <label>Opened </label>
                              </div>
                              <div fxFlex>
                                <label>Clicked </label>
                              </div>
                              <div fxFlex>
                                <label>Bounced</label>
                              </div>
                              <div fxFlex>
                                <label>Unsubscribed</label>
                              </div>
                            </div>
                            <div fxLayout="row" fxLayout.xs="column">
                              <div fxFlex>
                                {{ CampaignMailing.totalopened }}
                              </div>
                              <div fxFlex>
                                {{ CampaignMailing.totalclicked }}
                              </div>
                              <div fxFlex>
                                {{ CampaignMailing.totalbounced }}
                              </div>
                              <div fxFlex>
                                {{ CampaignMailing.totalunsubscribed }}
                              </div>
                            </div>
                          </div >

                          <mat-expansion-panel class="max-expansion-panel">
                            <mat-expansion-panel-header>
                              <mat-panel-title>
                                Website Statistics
                              </mat-panel-title>
                              <mat-panel-description>
                                Select your account to get Mailings website
                                behavior
                                <mat-icon>insert_chart</mat-icon>
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div  class="max-div -content">
                              <div fxLayout="row" fxLayout.xs="column">
                                <div fxFlex>
                                  <mat-form-field class="form-full-width">
                                    <mat-select [(ngModel)]="selectedanalytics" placeholder="GA Account"
                                      class="InputField">
                                      <mat-option *ngFor="
                                            let selectedanalytics of Googleanalytics
                                          " [value]="selectedanalytics">
                                        {{ selectedanalytics.name }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div fxFlex></div>
                                <div fxFlex>
                                  <button a mat-raised-button (click)="getAnalyticsCampaign(i)">
                                    Get Statistics
                                    <mat-icon>insert_chart</mat-icon>
                                  </button>
                                </div>
                              </div>
                              <div fxLayout="row" fxLayout.xs="column">
                                <div fxFlex>
                                  <label>Average Time on Website</label>
                                </div>
                                <label>Average Bounce Rate</label>
                                <div fxFlex>
                                  <label>Completed Goals</label>
                                </div>
                                <div fxFlex>
                                  <label>Page Views</label>
                                </div>
                              </div>
                              <div fxLayout="row" fxLayout.xs="column">
                                <div fxFlex>
                                  {{ avgTimeOnPage | slice: 0:4 }} seconds
                                </div>
                                {{
                                    bounceRate | slice: 0:4
                                  }}
                                %
                                <div fxFlex>{{ goalStartsAll }} goals</div>
                                <div fxFlex>{{ pageview | slice: 0:4 }} views</div>
                              </div>
                            </div >
                          </mat-expansion-panel>
                        </div>
                        <button a mat-raised-button *ngIf="!CampaignMailing.send"
                          (click)="openDialogScheduleMailingCampaign()">
                          Schedule
                          <mat-icon>schedule</mat-icon>
                        </button>
                        <a mat-mini-fab color="primary" (click)="openDialogDeleteMailingof(i)">
                          <mat-icon>delete</mat-icon>
                        </a>
                        <a mat-mini-fab color="primary" (click)="saveMailingCampaign()">
                          <mat-icon>save</mat-icon>
                        </a>
                        <a mat-mini-fab color="primary" class="toggelcampaignwindow"
                          (click)="toggleCampaignMailingNow(i)" matTooltip="Minimalize Panel" [ngClass]="
                              togglecampaignclasstrans[i] === false
                                ? 'toggelcampaignwindowfade'
                                : 'toggelcampaignwindow'
                            ">
                          <mat-icon>aspect_ratio</mat-icon>
                        </a>
                      </mat-card-content>
                    </mat-card>

                    <!-- <button mat-mini-fab color="primary" (click)="createCampaignExtraMailing()" class="createcampaignextra">
                  <mat-icon>add</mat-icon>
                </button> -->

                    <!-- <mat-card>
                  <mat-card-content>

                  </mat-card-content>
                </mat-card> -->

                    <br />
                  </div>
                  <button mat-mini-fab color="primary" (click)="createCampaignMailing()" class="createcampaignbutton">
                    <mat-icon>add</mat-icon>
                  </button>
                </div>
              </mat-card-content>
            </mat-card>

          </div>

          <!-- Mailing list  -->
          <div fxLayout="row" fxFlexOffset="10px" class="bottomlist" *ngIf="group.value == 'maillist'">
            <div class="card-left-menu" fxLayout="column" ngClass.gt-xs="listview-normal"
              ngClass.lt-sm="listview-noshow" [class.listview-xs-show]="listviewxsshow">

              <div class="addtobutton">
                <button mat-fab color="primary" matTooltip="Upload to or create Multiple Lists"
                  (click)="createMailingList()">
                  <mat-icon>add</mat-icon>
                </button>
                <button mat-mini-fab color="primary" matTooltip="Delete selected list" (click)="deleteMailingList()"
                  (click)="togglemultiplelist()">
                  <mat-icon>delete</mat-icon>
                </button>

                <button mat-mini-fab color="primary" matTooltip="Upload to multiple lists"
                  (click)="togglemultiplelist()">
                  <mat-icon>cloud_upload</mat-icon>
                </button>
              </div>


              <mat-form-field>
                <input matInput [(ngModel)]="searchboxMailinglist" (keyup.enter)="searchGoMailingList()"
                  placeholder="Name/Category" />
              </mat-form-field>

              <button a mat-raised-button color="primary" (click)="searchGoMailingList()">
                <mat-icon>search</mat-icon>Search Result
              </button>

              <button a mat-raised-button (click)="getMailinglist()">
                Show All
              </button>

              <div class="listview">
                <div *ngFor="let Mailinglist of Mailinglist" (click)="onSelectMailingList(Mailinglist)"
                  [class.selected]="Mailinglist === selectedMailingList">
                  <div class="box" style="font-size: 8pt">
                    <div fxLayout="row" fxLayout.xs="column">
                      <mat-icon color="primary">{{
                        Mailinglist.listname | slice: 0:1
                      }}</mat-icon>{{
                        Mailinglist.listname | slice: 1:22
                      }}
                      -
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <strong>{{ Mailinglist.total }}</strong>
                      | Clicked:
                      {{
                        Mailinglist.totalclicked
                      }}
                      | Opened:
                      {{
                        Mailinglist.totalopened
                      }}
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <div >
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      Total Amount of Entries:
                    </div>
                    <div fxFlex>
                      {{ mailinglisttotal }}
                    </div>
                  </div>
                  <div fxLayout="row" fxLayout.xs="column">
                    <div fxFlex>
                      Total Amount of Lists:
                    </div>
                    <div fxFlex>
                      {{ mailinglistcount }}
                    </div>
                  </div>

                </div >
              </div>
            </div>


            <div ngClass.gt-xs="container-normal" ngClass.lt-sm="container-noshow"
              [class.container-xs-show]="listviewxsshow" fxLayout="column" *ngIf="selectedMailingList">
              <mat-card>
                <mat-card-content>
                  <div>
                    <div fxLayout="row" fxLayout.xs="column">

                      <label>Edit maillist</label>

                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.listname" placeholder="Name"/>
                        </mat-form-field>
                      </div>

                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.categorie" placeholder="Categorie" />
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.industry" placeholder="Industry/NAICS" />
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.geolocation" placeholder="Location" />
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.description" placeholder="Description" />
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <button a mat-raised-button color="primary" (click)="saveMailingList()">
                          Save Mailinglist
                        </button>
                      </div>
                    </div>
                  </div>
                </mat-card-content>
              </mat-card>


              <div fxFlex class="relationcontainer" *ngIf="newmailinglisttoggle">
                <mat-card>
                  <mat-card-content>
                    <div  class="form-full-width">
                      <div fxLayout="row" fxLayout.xs="column">
                        <th>
                          <label>Create new maillist</label>
                        </th>
                      </div>
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlex>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.listname" placeholder="Name"
                              class="InputField" />
                            <!-- <mat-error *ngIf="name.invalid">{{getErrorMessage()}}</mat-error> -->
                          </mat-form-field>
                        </div>
                        <div fxFlex>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.categorie" placeholder="Categorie"
                              class="InputField" />
                          </mat-form-field>
                        </div>
                        <div fxFlex>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.industry" placeholder="Industry/NAICS"
                              class="InputField" />
                          </mat-form-field>
                        </div>
                      </div>
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlex>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.geolocation" placeholder="Location"
                              class="InputField" />
                          </mat-form-field>
                        </div>
                        <div fxFlex>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.description" placeholder="Description"
                              class="InputField" />
                          </mat-form-field>
                        </div>
                        <div fxFlex>
                          <button a mat-raised-button (click)="createMailingList()">
                            Save Mailinglist
                          </button>
                        </div>
                      </div>
                    </div >
                  </mat-card-content>
                </mat-card>
              </div>

              <div fxFlex class="uploadcontainer" *ngIf="toggleuploadlist">
                <div *ngIf="selectedMailingList">
                  <button mat-raised-button color="primary" (click)="showMailingList()">
                    <mat-icon>list</mat-icon> Show first entries list
                  </button>

                  <div *ngFor="
                      let mailinglistdetails of mailinglistdetails;
                      let i = index
                    ">
                    <div  style="width: 100%;">
                      <div fxLayout="row" fxLayout.xs="column">
                        <div fxFlexclass="mailinglistdetailscell">
                          {{ mailinglistdetails.vars.title }}
                          {{ mailinglistdetails.vars.firstname }}
                          {{ mailinglistdetails.vars.lastname }}
                        </div>
                        <div fxFlexclass="mailinglistdetailscell">
                          {{ mailinglistdetails.address }}
                        </div>
                        <div fxFlexclass="mailinglistdetailscell">
                          {{ mailinglistdetails.vars.company }}
                        </div>
                        <div fxFlexstyle="color: blue;" class="mailinglistdetailscell"
                          (click)="openmailinglistwebsite(i)">
                          {{ mailinglistdetails.vars.website }}
                          <!-- <mat-icon *ngIf="mailinglistdetails.vars.website" (click)="openmailinglistwebsite(i)">
                            open_in_new</mat-icon> -->
                        </div>
                        <div fxFlexclass="mailinglistdetailscell">
                          <mat-icon color="primary" (click)="
                              deleteOneMailingList(mailinglistdetails.address)
                            ">
                            delete</mat-icon>
                        </div>
                      </div>
                    </div >
                  </div>
                </div>

                <mat-card *ngIf="selectedMailingList">
                  <mat-card-content>
                    <label>Upload new addresses </label>
                    <br />
                    Check the following first:
                    <li>list is XLSX/XLS/CSV format</li>
                    <li>
                      div  starts with columns: address, company, firstname,
                      lastname, title
                    </li>
                    <div *ngIf="selectedMailingList">
                      <br />
                      Upload to:
                      <label>{{ selectedMailingList.listname }}</label>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="oneaddress" placeholder="Input Address" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="title" placeholder="Title" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="firstname" placeholder="Firstname" class="InputField" />
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <input matInput [(ngModel)]="lastname" placeholder="Lastname" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="companyname" placeholder="Company" class="InputField" />
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <button a mat-raised-button (click)="deleteOneMailingList()" color="primary">
                        Delete Address
                      </button>
                      <button a mat-raised-button (click)="addOneMailingList()" color="primary">
                        Add Address
                      </button>
                    </div>
                  </mat-card-content>
                </mat-card>
                <br />
                <mat-card>
                  <mat-card-content>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Email" [(ngModel)]="emailheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Mailinglist (if applicable)" [(ngModel)]="mailinglistheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select First Name" [(ngModel)]="firstnameheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Last Name" [(ngModel)]="lastnameheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Website" [(ngModel)]="websiteheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Title" [(ngModel)]="titleheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Select Company" [(ngModel)]="companyheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var1header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var2header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var3header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var4header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div fxFlex>
                        <mat-slide-toggle [(ngModel)]="createnewmailinglistonfield">Create new Mailinglist based on
                          Mailinglist
                          field</mat-slide-toggle>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <button a mat-stroked-button (click)="runImportMailingList()">
                          Upload to Mailinglist
                        </button>
                      </div>
                      <div fxFlex>
                        <button a mat-stroked-button (click)="runImportDeleteListMember()">
                          Find and Delete from List
                        </button>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <button a mat-stroked-button (click)="checkListOrCreate()">
                          Verify List and Upload
                        </button>
                      </div>
                      <div fxFlex>
                        <button a mat-stroked-button (click)="getEmailAddresses()">
                          Get Emails based on Name
                        </button>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <!-- <button a mat-stroked-button (click)="findEmailAdresses()">Find Email and Upload</button> -->
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column"></div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlexcolspan="2">
                        <div>
                          <h3>Upload small file (less then 500 entries)</h3>
                          <xlsx-file-upload (uploadedXls)="xlsxUploaded($event)">
                            <div class="drop-zone" [ngClass]="{
                                'drop-zone-over': hasBaseDropZoneOver
                              }">
                              {{ uploaderContent | async }}
                            </div>
                          </xlsx-file-upload>
                        </div>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlex>
                        <input type="file" style="display: inline-block;" (change)="xlsxUploaded($event)"
                          placeholder="Upload file" accept=".xlsx" />
                        <!-- <button type="button" class="btn btn-info" (click)="Upload()">Upload</button> -->
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlexcolspan="2">
                        <div>
                          <h3>Upload large list</h3>
                          <div style="background-color:beige">
                            <div >
                              <div fxLayout="row" fxLayout.xs="column">
                                <label>Please use standard xlsx format with the following header:</label>
                              </div>
                              <div fxLayout="row" fxLayout.xs="column">
                                <label>company, firstname, lastname, title, website, mailing</label>
                              </div>
                            </div >
                          </div>
                          <div ng2FileDrop [ngClass]="{ 'drop-zone-over': hasBaseDropZoneOver }"
                            (fileOver)="fileOverAnother($event)" [uploader]="uploader" class="drop-zone">
                            Drop Zone
                          </div>

                          <input type="file" ng2FileSelect [uploader]="uploader" />
                        </div>
                      </div>
                    </div>
                    <div fxLayout="row" fxLayout.xs="column">
                      <div fxFlexcolspan="2">
                        <div class="righ-upload-block">
                          <div >
                            <thead>
                              <div fxLayout="row" fxLayout.xs="column">
                                <th width="50%">Name</th>
                                <!-- <th>Size</th> -->
                                <th>Progress</th>
                                <th>Status</th>
                                <th>Actions</th>
                              </div>
                            </thead>
                            <tbody>
                              <div fxLayout="row" fxLayout.xs="column" *ngFor="let item of uploader.queue">
                                <div fxFlex>
                                  <strong>{{ item?.file?.name }}</strong>
                                </div>
                                <!-- <div fxFlex *ngIf="uploader.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB
                                </div> -->
                                <div fxFlex *ngIf="uploader.isHTML5">
                                  <div style="margin-bottom: 0;">
                                    <mat-progress-bar [color]="primary" [mode]="determinate" [value]="item.progress">
                                    </mat-progress-bar>
                                  </div>
                                </div>

                                <div fxFlex>
                                
                                    <mat-icon *ngIf="item.isSuccess">done</mat-icon>
                                  
                                    <mat-icon *ngIf="item.isCancel">cancel</mat-icon>
                                 
                                    <mat-icon *ngIf="item.isError">remove_circle</mat-icon>
                                 
                                </div>
                                <div fxFlexnowrap>
                                  <button mat-button (click)="setupload(item?.file?.name)"
                                    [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                    <mat-icon>file_upload</mat-icon>Upload
                                  </button>
                                  <button mat-button (click)="item.cancel()" [disabled]="!item.isUploading">
                                    <mat-icon>cancel</mat-icon> Cancel
                                  </button>
                                  <button mat-button (click)="item.remove()">
                                    <mat-icon>remove_circle</mat-icon> Remove
                                  </button>
                                </div>
                              </div>
                            </tbody>
                          </div >

                          <div>
                            <div>
                              Queue progress:
                              <div class="progress">
                                <div>
                                  <mat-progress-bar color="primary" mode="determinate" [value]="uploader.progress">
                                  </mat-progress-bar>
                                </div>
                              </div>
                            </div>
                          </div>
                          <br>
                          <button mat-button (click)="uploadFilelarge()" [disabled]="!newFiles.url">Start
                            Import</button>
                        </div>
                      </div>
                    </div>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>

          </div>

          <div style="width: 100%;" *ngIf="group.value == 'maileditor'">
            <app-maileditor #maileditor style="width: 100%;" [account]="Account" [option]="option"
              [updateMailingObj]="updateMailingObj" [company]="company">
            </app-maileditor>
          </div>
        </div>
      </div>
    </mat-tab>

    <!-- Channels/Social Media _______________________________ -->

    <mat-tab label="Channels/Social Media">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>mode_comment</mat-icon>
        <div fxShow.xs="false">Channels/Social Media</div>
      </ng-template>

      <app-marketingchannels [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
      </app-marketingchannels>
    </mat-tab>

    <!-- Promotions_______________________________ -->

    <!-- <mat-tab label="Promotions">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon (click)="getAdwords()">add_shopping_cart</mat-icon>
        <div fxShow.xs="false">Promotions</div>
      </ng-template>

      <app-marketingpromotions [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
      </app-marketingpromotions>

    </mat-tab> -->

    <!-- Image Editor__________________________________ -->
    <mat-tab label="Image Editor">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>image</mat-icon>
        <div fxShow.xs="false">Image Editor</div>
      </ng-template>

      <app-imagecreator [company]="company" [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
      </app-imagecreator>

    </mat-tab>

        <!-- Video Editor__________________________________ -->
        <mat-tab label="Video Editor">
            <ng-template mat-tab-label class="mat-tab-labels">
              <mat-icon>videocam</mat-icon>
              <div fxShow.xs="false">Video Editor</div>
            </ng-template>
      
            <app-videocreator [company]="company" [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
            </app-videocreator>
      
          </mat-tab>

  </mat-tab-group>
</div>